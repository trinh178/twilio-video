{"version":3,"sources":["components/VideoProvider/useSelectedParticipant/useSelectedParticipant.tsx","components/VideoProvider/useLocalTracks/useLocalTracks.ts","components/VideoProvider/useRoom/useRoom.tsx","components/VideoProvider/index.tsx","components/VideoProvider/useHandleRoomDisconnectionErrors/useHandleRoomDisconnectionErrors.ts","components/VideoProvider/useHandleTrackPublicationFailed/useHandleTrackPublicationFailed.ts","components/VideoProvider/useHandleOnDisconnect/useHandleOnDisconnect.ts","hooks/useVideoContext/useVideoContext.ts","components/Controls/EndCallButton/EndCallButton.tsx","hooks/useIsTrackEnabled/useIsTrackEnabled.tsx","components/Controls/ToggleAudioButton/ToggleAudioButton.tsx","hooks/useLocalAudioToggle/useLocalAudioToggle.tsx","components/Controls/ToggleVideoButton/ToggleVideoButton.tsx","hooks/useLocalVideoToggle/useLocalVideoToggle.tsx","hooks/useScreenShareParticipant/useScreenShareParticipant.tsx","components/Controls/ToogleScreenShareButton/ToggleScreenShareButton.tsx","hooks/useScreenShareToggle/useScreenShareToggle.tsx","hooks/useRoomState/useRoomState.tsx","components/Controls/Controls.tsx","components/Controls/useIsUserActive/useIsUserActive.ts","components/VideoTrack/VideoTrack.tsx","components/LocalVideoPreview/LocalVideoPreview.tsx","components/AudioLevelIndicator/AudioLevelIndicator.tsx","components/MenuBar/LocalAudioLevelIndicator/LocalAudioLevelIndicator.tsx","components/MenuBar/ToggleFullScreenButton/ToggleFullScreenButton.tsx","hooks/useFullScreenToggle/useFullScreenToggle.tsx","components/MenuBar/AboutDialog/AboutDialog.tsx","components/MenuBar/UserAvatar/UserAvatar.tsx","state/useFirebaseAuth/useFirebaseAuth.ts","state/usePasscodeAuth/usePasscodeAuth.ts","state/index.tsx","components/MenuBar/Menu/Menu.tsx","components/MenuBar/FlipCameraButton/FlipCameraButton.tsx","components/MenuBar/MenuBar.tsx","components/ReconnectingNotification/ReconnectingNotification.tsx","components/BandwidthWarning/BandwidthWarning.tsx","components/NewtorkQualityLevel/NetworkQualityLevel.tsx","components/ParticipantInfo/ParticipantConnectionIndicator/ParticipantConnectionIndicator.tsx","hooks/useParticipantIsReconnecting/useParticipantIsReconnecting.ts","components/ParticipantInfo/PinIcon/PinIcon.tsx","hooks/usePublications/usePublications.tsx","hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff.tsx","hooks/useTrack/useTrack.tsx","components/ParticipantInfo/ParticipantInfo.tsx","hooks/useParticipantNetworkQualityLevel/useParticipantNetworkQualityLevel.tsx","components/AudioTrack/AudioTrack.tsx","components/Publication/Publication.tsx","components/ParticipantTracks/ParticipantTracks.tsx","components/Participant/Participant.tsx","hooks/useDominantSpeaker/useDominantSpeaker.tsx","hooks/useParticipants/useParticipants.tsx","components/ParticipantStrip/ParticipantStrip.tsx","components/MainParticipantInfo/MainParticipantInfo.tsx","components/MainParticipant/MainParticipant.tsx","hooks/useMainSpeaker/useMainSpeaker.tsx","components/Room/Room.tsx","App.tsx","hooks/useHeight/useHeight.ts","components/ErrorDialog/ErrorDialog.tsx","components/ErrorDialog/enhanceMessage.ts","components/LoginPage/google-logo.svg","components/LoginPage/twilio-logo.svg","components/LoginPage/LoginPage.tsx","components/PrivateRoute/PrivateRoute.tsx","theme.ts","index.tsx","components/LoginPage/video-logo.png"],"names":["selectedParticipantContext","createContext","useSelectedParticipant","useContext","SelectedParticipantProvider","room","children","useState","selectedParticipant","_setSelectedParticipant","useEffect","onDisconnect","on","off","Provider","value","participant","prevParticipant","useLocalTracks","audioTrack","track","setTrack","Video","createLocalAudioTrack","then","newTrack","handleStopped","undefined","useLocalAudioTrack","getLocalVideoTrack","useCallback","facingMode","options","frameRate","height","width","name","createLocalVideoTrack","useLocalVideoTrack","videoTrack","localTracks","filter","window","TwilioVideo","VideoContext","VideoProvider","onError","onErrorCallback","error","console","log","message","EventEmitter","setRoom","isConnecting","setIsConnecting","disconnectHandlerRef","useRef","localTracksRef","current","connect","token","tracks","newRoom","once","setTimeout","removeEventListener","twilioRoom","forEach","localParticipant","publishTrack","priority","kind","disconnect","addEventListener","useRoom","onDisconnected","useHandleRoomDisconnectionErrors","useHandleTrackPublicationFailed","useHandleOnDisconnect","useVideoContext","context","Error","useStyles","makeStyles","theme","createStyles","fab","margin","spacing","EndCallButton","classes","Tooltip","title","onClick","placement","PopperProps","disablePortal","Fab","className","color","useIsTrackEnabled","isEnabled","setIsEnabled","setEnabled","setDisabled","ToggleAudioButton","props","find","disable","enable","useLocalAudioToggle","isAudioEnabled","toggleAudioEnabled","disabled","data-cy-audio-toggle","ToggleVideoButton","toggleVideoEnabled","localTrackPublication","unpublishTrack","emit","stop","useLocalVideoToggle","isVideoEnabled","useScreenShareParticipant","screenShareParticipant","setScreenShareParticipant","state","updateScreenShareParticipant","Array","from","participants","values","concat","trackName","backgroundColor","ToggleScreenShareButton","isSharing","setIsSharing","stopScreenShareRef","shareScreen","navigator","mediaDevices","getDisplayMedia","audio","video","stream","getTracks","trackPublication","onended","catch","toggleScreenShare","useScreenShareToggle","isScreenShared","disableScreenShareButton","isScreenShareSupported","isDisabled","tooltipMessage","style","cursor","useRoomState","setState","setRoomState","container","display","position","right","transform","bottom","zIndex","transition","opacity","visibility","maxWidth","breakpoints","down","sidebarMobileHeight","Controls","roomState","isReconnecting","showControls","isUserActive","setIsUserActive","timeoutIDRef","handleUserActivity","throttle","clearTimeout","timeoutID","useIsUserActive","clsx","styled","maxHeight","objectFit","VideoTrack","isLocal","ref","el","muted","setPriority","attach","detach","isFrontFacing","mediaStreamTrack","getSettings","LocalVideoPreview","audioContext","clipId","AudioContext","webkitAudioContext","initializeAnalyser","MediaStream","clone","audioSource","createMediaStreamSource","analyser","createAnalyser","smoothingTimeConstant","fftSize","React","memo","size","background","SIZE","isTrackEnabled","SVGClipElement","reinitializeAnalyser","sampleArray","Uint8Array","frequencyBinCount","timer","interval","getByteFrequencyData","length","i","volume","Math","min","max","log10","setAttribute","String","clipPathId","focusable","viewBox","aria-hidden","id","x","y","fill","d","clipPath","data-cy-audio-mute-icon","LocalAudioLevelIndicator","ToggleFullscreenButton","fscreen","fullscreenElement","isFullScreen","setIsFullScreen","onFullScreenChange","toggleFullScreen","exitFullscreen","requestFullscreen","document","documentElement","useFullScreenToggle","IconButton","aria-label","AboutDialog","open","onClose","Dialog","fullWidth","DialogTitle","DialogContent","DialogContentText","isSupported","version","appVersion","process","REACT_APP_GIT_TAG","REACT_APP_GIT_COMMIT","DialogActions","Button","autoFocus","red","UserAvatar","user","displayName","photoURL","Avatar","src","split","map","text","join","toUpperCase","firebaseConfig","apiKey","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","databaseURL","REACT_APP_FIREBASE_DATABASE_URL","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","fetchToken","passcode","fetch","method","headers","body","JSON","stringify","user_identity","room_name","verifyPasscode","res","a","json","jsonResponse","status","isValid","ok","getErrorMessage","usePasscodeAuth","history","useHistory","setUser","isAuthReady","setIsAuthReady","getToken","errorMessage","statusText","match","location","search","sessionStorage","getItem","getPasscode","verification","setItem","replace","pathname","signIn","signOut","removeItem","Promise","resolve","StateContext","AppStateProvider","setError","isFetching","setIsFetching","contextValue","REACT_APP_SET_AUTH","identity","roomName","Headers","getIdToken","idToken","set","endpoint","REACT_APP_TOKEN_ENDPOINT","params","URLSearchParams","firebase","onAuthStateChanged","provider","GoogleAuthProvider","addScope","signInWithPopup","useFirebaseAuth","AccessToken","require","jwt","VideoGrant","accessToken","grant","addGrant","toJwt","getAccessToken","err","reject","useAppState","Menu","aboutOpen","setAboutOpen","menuOpen","setMenuOpen","anchorRef","handleSignOut","anchorEl","MenuItem","FlipCameraButton","supportsFacingMode","setSupportsFacingMode","Boolean","toggleFacingMode","newVideoTrack","palette","default","toolbar","padding","rightButtonContainer","alignItems","marginLeft","form","flexWrap","up","textField","marginRight","loadingSpinner","minWidth","fontWeight","joinButton","MenuBar","URLRoomName","useParams","setName","setRoomName","AppBar","Toolbar","onSubmit","event","preventDefault","origin","includes","replaceState","encodeURI","TextField","label","onChange","target","Typography","variant","type","CircularProgress","snackbar","icon","ReconnectingNotification","Snackbar","anchorOrigin","vertical","horizontal","SnackbarContent","BandwidthWarningContainer","flexDirection","justifyContent","Warning","textAlign","BandwidthWarning","fontSize","Container","border","boxSizing","borderRight","NetworkQualityLevel","qualityLevel","level","key","indicator","borderRadius","ParticipantConnectionIndicator","setIsReconnecting","handleReconnecting","handleReconnected","useParticipantIsReconnecting","PinIcon","SvgIcon","float","usePublications","publications","setPublications","publicationAdded","publication","prevPublications","publicationRemoved","p","useIsTrackSwitchedOff","isSwitchedOff","setIsSwitchedOff","handleSwitchedOff","handleSwitchedOn","useTrack","removeTrack","sidebarWidth","overflow","stroke","strokeWidth","isVideoSwitchedOff","infoContainer","hideVideo","infoRow","ParticipantInfo","isSelected","audioPublication","videoPublication","networkQualityLevel","setNetworkQualityLevel","handleNewtorkQualityLevelChange","newNetworkQualityLevel","useParticipantNetworkQualityLevel","isScreenShareEnabled","data-cy-participant","AudioTrack","appendChild","remove","Publication","disableAudio","videoPriority","ParticipantTracks","filteredPublications","enableScreenShare","some","Participant","useDominantSpeaker","dominantSpeaker","setDominantSpeaker","handleDominantSpeakerChanged","newDominantSpeaker","handleParticipantDisconnected","prevDominantSpeaker","useParticipants","setParticipants","prevParticipants","participantConnected","participantDisconnected","overflowY","overflowX","ScrollContainer","ParticipantStrip","setSelectedParticipant","sid","gridArea","MainParticipantInfo","screenSharePublication","data-cy-main-participant","MainParticipant","mainParticipant","useMainSpeaker","gridTemplateColumns","gridTemplateAreas","gridTemplateRows","gridGap","Room","Main","App","innerHeight","setHeight","onResize","useHeight","ErrorDialog","dismissError","code","enhancedMessage","enhanceMessage","_extends","Object","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","_ref4","filterUnits","dx","dy","in","result","stdDeviation","rx","_ref5","fillRule","_ref","svgRef","ForwardRef","forwardRef","twilioLogo","videoLogo","paper","marginTop","button","textTransform","createMuiTheme","LoginPage","useLocation","setPasscode","authError","setAuthError","isAuthEnabled","login","ThemeProvider","Grid","justify","Paper","elevation","alt","startIcon","e","direction","PrivateRoute","rest","renderChildren","render","to","primary","main","connectionOptions","bandwidthProfile","mode","dominantSpeakerPriority","renderDimensions","high","standard","low","maxAudioBitrate","networkQuality","local","remote","preferredVideoCodecs","codec","simulcast","VideoApp","ReactDOM","CssBaseline","exact","path","getElementById","module","exports"],"mappings":"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","file":"static/js/main.9c708d09.chunk.js","sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { Participant, Room } from 'twilio-video';\r\n\r\ntype selectedParticipantContextType = [Participant | null, (participant: Participant) => void];\r\n\r\nexport const selectedParticipantContext = createContext<selectedParticipantContextType>(null!);\r\n\r\nexport default function useSelectedParticipant() {\r\n  const [selectedParticipant, setSelectedParticipant] = useContext(selectedParticipantContext);\r\n  return [selectedParticipant, setSelectedParticipant] as const;\r\n}\r\n\r\ntype SelectedParticipantProviderProps = {\r\n  room: Room;\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport function SelectedParticipantProvider({ room, children }: SelectedParticipantProviderProps) {\r\n  const [selectedParticipant, _setSelectedParticipant] = useState<Participant | null>(null);\r\n  const setSelectedParticipant = (participant: Participant) =>\r\n    _setSelectedParticipant(prevParticipant => (prevParticipant === participant ? null : participant));\r\n\r\n  useEffect(() => {\r\n    const onDisconnect = () => _setSelectedParticipant(null);\r\n    room.on('disconnected', onDisconnect);\r\n    return () => {\r\n      room.off('disconnected', onDisconnect);\r\n    };\r\n  }, [room]);\r\n\r\n  return (\r\n    <selectedParticipantContext.Provider value={[selectedParticipant, setSelectedParticipant]}>\r\n      {children}\r\n    </selectedParticipantContext.Provider>\r\n  );\r\n}\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport Video, { LocalVideoTrack, LocalAudioTrack, CreateLocalTrackOptions } from 'twilio-video';\r\n\r\nexport function useLocalAudioTrack() {\r\n  const [track, setTrack] = useState<LocalAudioTrack>();\r\n\r\n  useEffect(() => {\r\n    Video.createLocalAudioTrack().then(newTrack => {\r\n      setTrack(newTrack);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleStopped = () => setTrack(undefined);\r\n    if (track) {\r\n      track.on('stopped', handleStopped);\r\n      return () => {\r\n        track.off('stopped', handleStopped);\r\n      };\r\n    }\r\n  }, [track]);\r\n\r\n  return track;\r\n}\r\n\r\nexport function useLocalVideoTrack() {\r\n  const [track, setTrack] = useState<LocalVideoTrack>();\r\n\r\n  const getLocalVideoTrack = useCallback((facingMode?: CreateLocalTrackOptions['facingMode']) => {\r\n    const options: CreateLocalTrackOptions = {\r\n      frameRate: 24,\r\n      height: 720,\r\n      width: 1280,\r\n      name: 'camera',\r\n    };\r\n\r\n    if (facingMode) {\r\n      options.facingMode = facingMode;\r\n    }\r\n\r\n    return Video.createLocalVideoTrack(options).then(newTrack => {\r\n      setTrack(newTrack);\r\n      return newTrack;\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // We get a new local video track when the app loads.\r\n    getLocalVideoTrack();\r\n  }, [getLocalVideoTrack]);\r\n\r\n  useEffect(() => {\r\n    const handleStopped = () => setTrack(undefined);\r\n    if (track) {\r\n      track.on('stopped', handleStopped);\r\n      return () => {\r\n        track.off('stopped', handleStopped);\r\n      };\r\n    }\r\n  }, [track]);\r\n\r\n  return [track, getLocalVideoTrack] as const;\r\n}\r\n\r\nexport default function useLocalTracks() {\r\n  const audioTrack = useLocalAudioTrack();\r\n  const [videoTrack, getLocalVideoTrack] = useLocalVideoTrack();\r\n\r\n  const localTracks = [audioTrack, videoTrack].filter(track => track !== undefined) as (\r\n    | LocalAudioTrack\r\n    | LocalVideoTrack\r\n  )[];\r\n\r\n  return { localTracks, getLocalVideoTrack };\r\n}\r\n","import EventEmitter from 'events';\r\nimport { useCallback, useEffect, useRef, useState } from 'react';\r\nimport Video, { ConnectOptions, LocalTrack, Room } from 'twilio-video';\r\nimport { Callback } from '../../../types';\r\n\r\n// @ts-ignore\r\nwindow.TwilioVideo = Video;\r\n\r\nexport default function useRoom(localTracks: LocalTrack[], onError: Callback, options?: ConnectOptions) {\r\n  const [room, setRoom] = useState<Room>(new EventEmitter() as Room);\r\n  const [isConnecting, setIsConnecting] = useState(false);\r\n  const disconnectHandlerRef = useRef<() => void>(() => {});\r\n  const localTracksRef = useRef<LocalTrack[]>([]);\r\n\r\n  useEffect(() => {\r\n    // It can take a moment for Video.connect to connect to a room. During this time, the user may have enabled or disabled their\r\n    // local audio or video tracks. If this happens, we store the localTracks in this ref, so that they are correctly published\r\n    // once the user is connected to the room.\r\n    localTracksRef.current = localTracks;\r\n  }, [localTracks]);\r\n\r\n  const connect = useCallback(\r\n    token => {\r\n      setIsConnecting(true);\r\n      return Video.connect(token, { ...options, tracks: [] }).then(\r\n        newRoom => {\r\n          setRoom(newRoom);\r\n\r\n          newRoom.once('disconnected', () => {\r\n            // Reset the room only after all other `disconnected` listeners have been called.\r\n            setTimeout(() => setRoom(new EventEmitter() as Room));\r\n            window.removeEventListener('beforeunload', disconnectHandlerRef.current);\r\n          });\r\n\r\n          // @ts-ignore\r\n          window.twilioRoom = newRoom;\r\n\r\n          localTracksRef.current.forEach(track =>\r\n            // Tracks can be supplied as arguments to the Video.connect() function and they will automatically be published.\r\n            // However, tracks must be published manually in order to set the priority on them.\r\n            // All video tracks are published with 'low' priority. This works because the video\r\n            // track that is displayed in the 'MainParticipant' component will have it's priority\r\n            // set to 'high' via track.setPriority()\r\n            newRoom.localParticipant.publishTrack(track, { priority: track.kind === 'video' ? 'low' : 'standard' })\r\n          );\r\n\r\n          disconnectHandlerRef.current = () => newRoom.disconnect();\r\n          setIsConnecting(false);\r\n\r\n          // Add a listener to disconnect from the room when a user closes their browser\r\n          window.addEventListener('beforeunload', disconnectHandlerRef.current);\r\n        },\r\n        error => {\r\n          onError(error);\r\n          setIsConnecting(false);\r\n        }\r\n      );\r\n    },\r\n    [options, onError]\r\n  );\r\n\r\n  return { room, isConnecting, connect };\r\n}\r\n","import React, { createContext, ReactNode } from 'react';\r\nimport {\r\n  CreateLocalTrackOptions,\r\n  ConnectOptions,\r\n  LocalAudioTrack,\r\n  LocalVideoTrack,\r\n  Room,\r\n  TwilioError,\r\n} from 'twilio-video';\r\nimport { Callback, ErrorCallback } from '../../types';\r\nimport { SelectedParticipantProvider } from './useSelectedParticipant/useSelectedParticipant';\r\n\r\nimport useHandleRoomDisconnectionErrors from './useHandleRoomDisconnectionErrors/useHandleRoomDisconnectionErrors';\r\nimport useHandleOnDisconnect from './useHandleOnDisconnect/useHandleOnDisconnect';\r\nimport useHandleTrackPublicationFailed from './useHandleTrackPublicationFailed/useHandleTrackPublicationFailed';\r\nimport useLocalTracks from './useLocalTracks/useLocalTracks';\r\nimport useRoom from './useRoom/useRoom';\r\n\r\n/*\r\n *  The hooks used by the VideoProvider component are different than the hooks found in the 'hooks/' directory. The hooks\r\n *  in the 'hooks/' directory can be used anywhere in a video application, and they can be used any number of times.\r\n *  the hooks in the 'VideoProvider/' directory are intended to be used by the VideoProvider component only. Using these hooks\r\n *  elsewhere in the application may cause problems as these hooks should not be used more than once in an application.\r\n */\r\n\r\nexport interface IVideoContext {\r\n  room: Room;\r\n  localTracks: (LocalAudioTrack | LocalVideoTrack)[];\r\n  isConnecting: boolean;\r\n  connect: (token: string) => Promise<void>;\r\n  onError: ErrorCallback;\r\n  onDisconnect: Callback;\r\n  getLocalVideoTrack: (facingMode?: CreateLocalTrackOptions['facingMode']) => Promise<LocalVideoTrack>;\r\n}\r\n\r\nexport const VideoContext = createContext<IVideoContext>(null!);\r\n\r\ninterface VideoProviderProps {\r\n  options?: ConnectOptions;\r\n  onError: ErrorCallback;\r\n  onDisconnect?: Callback;\r\n  children: ReactNode;\r\n}\r\n\r\nexport function VideoProvider({ options, children, onError = () => {}, onDisconnect = () => {} }: VideoProviderProps) {\r\n  const onErrorCallback = (error: TwilioError) => {\r\n    console.log(`ERROR: ${error.message}`, error);\r\n    onError(error);\r\n  };\r\n\r\n  const { localTracks, getLocalVideoTrack } = useLocalTracks();\r\n  const { room, isConnecting, connect } = useRoom(localTracks, onErrorCallback, options);\r\n\r\n  // Register onError and onDisconnect callback functions.\r\n  useHandleRoomDisconnectionErrors(room, onError);\r\n  useHandleTrackPublicationFailed(room, onError);\r\n  useHandleOnDisconnect(room, onDisconnect);\r\n\r\n  return (\r\n    <VideoContext.Provider\r\n      value={{\r\n        room,\r\n        localTracks,\r\n        isConnecting,\r\n        onError: onErrorCallback,\r\n        onDisconnect,\r\n        getLocalVideoTrack,\r\n        connect,\r\n      }}\r\n    >\r\n      <SelectedParticipantProvider room={room}>{children}</SelectedParticipantProvider>\r\n    </VideoContext.Provider>\r\n  );\r\n}\r\n","import { Room, TwilioError } from 'twilio-video';\r\nimport { useEffect } from 'react';\r\n\r\nimport { Callback } from '../../../types';\r\n\r\nexport default function useHandleRoomDisconnectionErrors(room: Room, onError: Callback) {\r\n  useEffect(() => {\r\n    const onDisconnected = (room: Room, error: TwilioError) => {\r\n      if (error) {\r\n        onError(error);\r\n      }\r\n    };\r\n\r\n    room.on('disconnected', onDisconnected);\r\n    return () => {\r\n      room.off('disconnected', onDisconnected);\r\n    };\r\n  }, [room, onError]);\r\n}\r\n","import { Room } from 'twilio-video';\r\nimport { useEffect } from 'react';\r\n\r\nimport { Callback } from '../../../types';\r\n\r\nexport default function useHandleTrackPublicationFailed(room: Room, onError: Callback) {\r\n  const { localParticipant } = room;\r\n  useEffect(() => {\r\n    if (localParticipant) {\r\n      localParticipant.on('trackPublicationFailed', onError);\r\n      return () => {\r\n        localParticipant.off('trackPublicationFailed', onError);\r\n      };\r\n    }\r\n  }, [localParticipant, onError]);\r\n}\r\n","import { useEffect } from 'react';\r\nimport { Room } from 'twilio-video';\r\nimport { Callback } from '../../../types';\r\n\r\nexport default function useHandleOnDisconnect(room: Room, onDisconnect: Callback) {\r\n  useEffect(() => {\r\n    room.on('disconnected', onDisconnect);\r\n    return () => {\r\n      room.off('disconnected', onDisconnect);\r\n    };\r\n  }, [room, onDisconnect]);\r\n}\r\n","import { useContext } from 'react';\r\nimport { VideoContext } from '../../components/VideoProvider';\r\n\r\nexport default function useVideoContext() {\r\n  const context = useContext(VideoContext);\r\n  if (!context) {\r\n    throw new Error('useVideoContext must be used within a VideoProvider');\r\n  }\r\n  return context;\r\n}\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nimport CallEnd from '@material-ui/icons/CallEnd';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    fab: {\r\n      margin: theme.spacing(1),\r\n    },\r\n  })\r\n);\r\n\r\nexport default function EndCallButton() {\r\n  const classes = useStyles();\r\n  const { room } = useVideoContext();\r\n\r\n  return (\r\n    <Tooltip title={'End Call'} onClick={() => room.disconnect()} placement=\"top\" PopperProps={{ disablePortal: true }}>\r\n      <Fab className={classes.fab} color=\"primary\">\r\n        <CallEnd />\r\n      </Fab>\r\n    </Tooltip>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { LocalAudioTrack, LocalVideoTrack, RemoteAudioTrack, RemoteVideoTrack } from 'twilio-video';\r\n\r\ntype TrackType = LocalAudioTrack | LocalVideoTrack | RemoteAudioTrack | RemoteVideoTrack | undefined;\r\n\r\nexport default function useIsTrackEnabled(track: TrackType) {\r\n  const [isEnabled, setIsEnabled] = useState(track ? track.isEnabled : true);\r\n\r\n  useEffect(() => {\r\n    setIsEnabled(track ? track.isEnabled : true);\r\n\r\n    if (track) {\r\n      const setEnabled = () => setIsEnabled(true);\r\n      const setDisabled = () => setIsEnabled(false);\r\n      track.on('enabled', setEnabled);\r\n      track.on('disabled', setDisabled);\r\n      return () => {\r\n        track.off('enabled', setEnabled);\r\n        track.off('disabled', setDisabled);\r\n      };\r\n    }\r\n  }, [track]);\r\n\r\n  return isEnabled;\r\n}\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Mic from '@material-ui/icons/Mic';\r\nimport MicOff from '@material-ui/icons/MicOff';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport useLocalAudioToggle from '../../../hooks/useLocalAudioToggle/useLocalAudioToggle';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    fab: {\r\n      margin: theme.spacing(1),\r\n    },\r\n  })\r\n);\r\n\r\nexport default function ToggleAudioButton(props: { disabled?: boolean }) {\r\n  const classes = useStyles();\r\n  const [isAudioEnabled, toggleAudioEnabled] = useLocalAudioToggle();\r\n\r\n  return (\r\n    <Tooltip\r\n      title={isAudioEnabled ? 'Mute Audio' : 'Unmute Audio'}\r\n      placement=\"top\"\r\n      PopperProps={{ disablePortal: true }}\r\n    >\r\n      <Fab className={classes.fab} onClick={toggleAudioEnabled} disabled={props.disabled} data-cy-audio-toggle>\r\n        {isAudioEnabled ? <Mic /> : <MicOff />}\r\n      </Fab>\r\n    </Tooltip>\r\n  );\r\n}\r\n","import { LocalAudioTrack } from 'twilio-video';\r\nimport { useCallback } from 'react';\r\nimport useIsTrackEnabled from '../useIsTrackEnabled/useIsTrackEnabled';\r\nimport useVideoContext from '../useVideoContext/useVideoContext';\r\n\r\nexport default function useLocalAudioToggle() {\r\n  const { localTracks } = useVideoContext();\r\n  const audioTrack = localTracks.find(track => track.kind === 'audio') as LocalAudioTrack;\r\n  const isEnabled = useIsTrackEnabled(audioTrack);\r\n\r\n  const toggleAudioEnabled = useCallback(() => {\r\n    if (audioTrack) {\r\n      audioTrack.isEnabled ? audioTrack.disable() : audioTrack.enable();\r\n    }\r\n  }, [audioTrack]);\r\n\r\n  return [isEnabled, toggleAudioEnabled] as const;\r\n}\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Videocam from '@material-ui/icons/Videocam';\r\nimport VideocamOff from '@material-ui/icons/VideocamOff';\r\n\r\nimport useLocalVideoToggle from '../../../hooks/useLocalVideoToggle/useLocalVideoToggle';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    fab: {\r\n      margin: theme.spacing(1),\r\n    },\r\n  })\r\n);\r\n\r\nexport default function ToggleVideoButton(props: { disabled?: boolean }) {\r\n  const classes = useStyles();\r\n  const [isVideoEnabled, toggleVideoEnabled] = useLocalVideoToggle();\r\n\r\n  return (\r\n    <Tooltip\r\n      title={isVideoEnabled ? 'Mute Video' : 'Unmute Video'}\r\n      placement=\"top\"\r\n      PopperProps={{ disablePortal: true }}\r\n    >\r\n      <Fab className={classes.fab} onClick={toggleVideoEnabled} disabled={props.disabled}>\r\n        {isVideoEnabled ? <Videocam /> : <VideocamOff />}\r\n      </Fab>\r\n    </Tooltip>\r\n  );\r\n}\r\n","import { LocalVideoTrack } from 'twilio-video';\r\nimport { useCallback } from 'react';\r\nimport useVideoContext from '../useVideoContext/useVideoContext';\r\n\r\nexport default function useLocalVideoToggle() {\r\n  const {\r\n    room: { localParticipant },\r\n    localTracks,\r\n    getLocalVideoTrack,\r\n  } = useVideoContext();\r\n  const videoTrack = localTracks.find(track => track.name === 'camera') as LocalVideoTrack;\r\n\r\n  const toggleVideoEnabled = useCallback(() => {\r\n    if (videoTrack) {\r\n      if (localParticipant) {\r\n        const localTrackPublication = localParticipant.unpublishTrack(videoTrack);\r\n        // TODO: remove when SDK implements this event. See: https://issues.corp.twilio.com/browse/JSDK-2592\r\n        localParticipant.emit('trackUnpublished', localTrackPublication);\r\n      }\r\n      videoTrack.stop();\r\n    } else {\r\n      getLocalVideoTrack().then((track: LocalVideoTrack) => {\r\n        if (localParticipant) {\r\n          localParticipant.publishTrack(track, { priority: 'low' });\r\n        }\r\n      });\r\n    }\r\n  }, [videoTrack, localParticipant, getLocalVideoTrack]);\r\n\r\n  return [!!videoTrack, toggleVideoEnabled] as const;\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport useVideoContext from '../useVideoContext/useVideoContext';\r\n\r\nimport { Participant, TrackPublication } from 'twilio-video';\r\n\r\n/*\r\n  Returns the participant that is sharing their screen (if any). This hook assumes that only one participant\r\n  can share their screen at a time.\r\n*/\r\nexport default function useScreenShareParticipant() {\r\n  const { room } = useVideoContext();\r\n  const [screenShareParticipant, setScreenShareParticipant] = useState<Participant>();\r\n\r\n  useEffect(() => {\r\n    if (room.state === 'connected') {\r\n      const updateScreenShareParticipant = () => {\r\n        setScreenShareParticipant(\r\n          Array.from<Participant>(room.participants.values())\r\n            // the screenshare participant could be the localParticipant\r\n            .concat(room.localParticipant)\r\n            .find((participant: Participant) =>\r\n              Array.from<TrackPublication>(participant.tracks.values()).find(track => track.trackName === 'screen')\r\n            )\r\n        );\r\n      };\r\n      updateScreenShareParticipant();\r\n\r\n      room.on('trackPublished', updateScreenShareParticipant);\r\n      room.on('trackUnpublished', updateScreenShareParticipant);\r\n      room.on('participantDisconnected', updateScreenShareParticipant);\r\n\r\n      // the room object does not emit 'trackPublished' events for the localParticipant,\r\n      // so we need to listen for them here.\r\n      room.localParticipant.on('trackPublished', updateScreenShareParticipant);\r\n      room.localParticipant.on('trackUnpublished', updateScreenShareParticipant);\r\n      return () => {\r\n        room.off('trackPublished', updateScreenShareParticipant);\r\n        room.off('trackUnpublished', updateScreenShareParticipant);\r\n        room.off('participantDisconnected', updateScreenShareParticipant);\r\n\r\n        room.localParticipant.off('trackPublished', updateScreenShareParticipant);\r\n        room.localParticipant.off('trackUnpublished', updateScreenShareParticipant);\r\n      };\r\n    }\r\n  }, [room]);\r\n\r\n  return screenShareParticipant;\r\n}\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nimport Fab from '@material-ui/core/Fab';\r\nimport ScreenShare from '@material-ui/icons/ScreenShare';\r\nimport StopScreenShare from '@material-ui/icons/StopScreenShare';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport useScreenShareToggle from '../../../hooks/useScreenShareToggle/useScreenShareToggle';\r\nimport useScreenShareParticipant from '../../../hooks/useScreenShareParticipant/useScreenShareParticipant';\r\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\r\n\r\nexport const SCREEN_SHARE_TEXT = 'Share Screen';\r\nexport const STOP_SCREEN_SHARE_TEXT = 'Stop Sharing Screen';\r\nexport const SHARE_IN_PROGRESS_TEXT = 'Cannot share screen when another user is sharing';\r\nexport const SHARE_NOT_SUPPORTED_TEXT = 'Screen sharing is not supported with this browser';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    fab: {\r\n      margin: theme.spacing(1),\r\n      '&[disabled]': {\r\n        color: 'rgba(225, 225, 225, 0.8)',\r\n        backgroundColor: 'rgba(175, 175, 175, 0.6);',\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nexport default function ToggleScreenShareButton(props: { disabled?: boolean }) {\r\n  const classes = useStyles();\r\n  const [isScreenShared, toggleScreenShare] = useScreenShareToggle();\r\n  const screenShareParticipant = useScreenShareParticipant();\r\n  const { room } = useVideoContext();\r\n  const disableScreenShareButton = screenShareParticipant && screenShareParticipant !== room.localParticipant;\r\n  const isScreenShareSupported = navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia;\r\n  const isDisabled = props.disabled || disableScreenShareButton || !isScreenShareSupported;\r\n\r\n  let tooltipMessage = SCREEN_SHARE_TEXT;\r\n\r\n  if (isScreenShared) {\r\n    tooltipMessage = STOP_SCREEN_SHARE_TEXT;\r\n  }\r\n\r\n  if (disableScreenShareButton) {\r\n    tooltipMessage = SHARE_IN_PROGRESS_TEXT;\r\n  }\r\n\r\n  if (!isScreenShareSupported) {\r\n    tooltipMessage = SHARE_NOT_SUPPORTED_TEXT;\r\n  }\r\n\r\n  return (\r\n    <Tooltip\r\n      title={tooltipMessage}\r\n      placement=\"top\"\r\n      PopperProps={{ disablePortal: true }}\r\n      style={{ cursor: isDisabled ? 'not-allowed' : 'pointer' }}\r\n    >\r\n      <div>\r\n        {/* The div element is needed because a disabled button will not emit hover events and we want to display\r\n          a tooltip when screen sharing is disabled */}\r\n        <Fab className={classes.fab} onClick={toggleScreenShare} disabled={isDisabled}>\r\n          {isScreenShared ? <StopScreenShare /> : <ScreenShare />}\r\n        </Fab>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n}\r\n","import { useState, useCallback, useRef } from 'react';\r\nimport useVideoContext from '../useVideoContext/useVideoContext';\r\nimport { LogLevels, Track } from 'twilio-video';\r\n\r\ninterface MediaStreamTrackPublishOptions {\r\n  name?: string;\r\n  priority: Track.Priority;\r\n  logLevel: LogLevels;\r\n}\r\n\r\nexport default function useScreenShareToggle() {\r\n  const { room, onError } = useVideoContext();\r\n  const [isSharing, setIsSharing] = useState(false);\r\n  const stopScreenShareRef = useRef<() => void>(null!);\r\n\r\n  const shareScreen = useCallback(() => {\r\n    navigator.mediaDevices\r\n      .getDisplayMedia({\r\n        audio: false,\r\n        video: {\r\n          frameRate: 10,\r\n          height: 1080,\r\n          width: 1920,\r\n        },\r\n      })\r\n      .then(stream => {\r\n        const track = stream.getTracks()[0];\r\n\r\n        // All video tracks are published with 'low' priority. This works because the video\r\n        // track that is displayed in the 'MainParticipant' component will have it's priority\r\n        // set to 'high' via track.setPriority()\r\n        room.localParticipant\r\n          .publishTrack(track, {\r\n            name: 'screen', // Tracks can be named to easily find them later\r\n            priority: 'low', // Priority is set to high by the subscriber when the video track is rendered\r\n          } as MediaStreamTrackPublishOptions)\r\n          .then(trackPublication => {\r\n            stopScreenShareRef.current = () => {\r\n              room.localParticipant.unpublishTrack(track);\r\n              // TODO: remove this if the SDK is updated to emit this event\r\n              room.localParticipant.emit('trackUnpublished', trackPublication);\r\n              track.stop();\r\n              setIsSharing(false);\r\n            };\r\n\r\n            track.onended = stopScreenShareRef.current;\r\n            setIsSharing(true);\r\n          })\r\n          .catch(onError);\r\n      })\r\n      .catch(error => {\r\n        // Don't display an error if the user closes the screen share dialog\r\n        if (error.name !== 'AbortError' && error.name !== 'NotAllowedError') {\r\n          onError(error);\r\n        }\r\n      });\r\n  }, [room, onError]);\r\n\r\n  const toggleScreenShare = useCallback(() => {\r\n    !isSharing ? shareScreen() : stopScreenShareRef.current();\r\n  }, [isSharing, shareScreen, stopScreenShareRef]);\r\n\r\n  return [isSharing, toggleScreenShare] as const;\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport useVideoContext from '../useVideoContext/useVideoContext';\r\n\r\ntype RoomStateType = 'disconnected' | 'connected' | 'reconnecting';\r\n\r\nexport default function useRoomState() {\r\n  const { room } = useVideoContext();\r\n  const [state, setState] = useState<RoomStateType>('disconnected');\r\n\r\n  useEffect(() => {\r\n    const setRoomState = () => setState((room.state || 'disconnected') as RoomStateType);\r\n    setRoomState();\r\n    room\r\n      .on('disconnected', setRoomState)\r\n      .on('reconnected', setRoomState)\r\n      .on('reconnecting', setRoomState);\r\n    return () => {\r\n      room\r\n        .off('disconnected', setRoomState)\r\n        .off('reconnected', setRoomState)\r\n        .off('reconnecting', setRoomState);\r\n    };\r\n  }, [room]);\r\n\r\n  return state;\r\n}\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport EndCallButton from './EndCallButton/EndCallButton';\r\nimport ToggleAudioButton from './ToggleAudioButton/ToggleAudioButton';\r\nimport ToggleVideoButton from './ToggleVideoButton/ToggleVideoButton';\r\nimport ToggleScreenShareButton from './ToogleScreenShareButton/ToggleScreenShareButton';\r\n\r\nimport useIsUserActive from './useIsUserActive/useIsUserActive';\r\nimport useRoomState from '../../hooks/useRoomState/useRoomState';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      display: 'flex',\r\n      position: 'absolute',\r\n      right: '50%',\r\n      transform: 'translate(50%, 30px)',\r\n      bottom: '50px',\r\n      zIndex: 1,\r\n      transition: 'opacity 1.2s, transform 1.2s, visibility 0s 1.2s',\r\n      opacity: 0,\r\n      visibility: 'hidden',\r\n      maxWidth: 'min-content',\r\n      '&.showControls, &:hover': {\r\n        transition: 'opacity 0.6s, transform 0.6s, visibility 0s',\r\n        opacity: 1,\r\n        visibility: 'visible',\r\n        transform: 'translate(50%, 0px)',\r\n      },\r\n      [theme.breakpoints.down('xs')]: {\r\n        bottom: `${theme.sidebarMobileHeight + 3}px`,\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nexport default function Controls() {\r\n  const classes = useStyles();\r\n  const roomState = useRoomState();\r\n  const isReconnecting = roomState === 'reconnecting';\r\n  const isUserActive = useIsUserActive();\r\n  const showControls = isUserActive || roomState === 'disconnected';\r\n\r\n  return (\r\n    <div className={clsx(classes.container, { showControls })}>\r\n      <ToggleAudioButton disabled={isReconnecting} />\r\n      <ToggleVideoButton disabled={isReconnecting} />\r\n      {roomState !== 'disconnected' && (\r\n        <>\r\n          <ToggleScreenShareButton disabled={isReconnecting} />\r\n          <EndCallButton />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState } from 'react';\r\nimport throttle from 'lodash.throttle';\r\n\r\nexport default function useIsUserActive() {\r\n  const [isUserActive, setIsUserActive] = useState(true);\r\n  const timeoutIDRef = useRef(0);\r\n\r\n  useEffect(() => {\r\n    const handleUserActivity = throttle(() => {\r\n      setIsUserActive(true);\r\n      clearTimeout(timeoutIDRef.current);\r\n      const timeoutID = window.setTimeout(() => setIsUserActive(false), 5000);\r\n      timeoutIDRef.current = timeoutID;\r\n    }, 500);\r\n\r\n    handleUserActivity();\r\n\r\n    window.addEventListener('mousemove', handleUserActivity);\r\n    window.addEventListener('click', handleUserActivity);\r\n    window.addEventListener('keydown', handleUserActivity);\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleUserActivity);\r\n      window.removeEventListener('click', handleUserActivity);\r\n      window.removeEventListener('keydown', handleUserActivity);\r\n      clearTimeout(timeoutIDRef.current);\r\n    };\r\n  }, []);\r\n\r\n  return isUserActive;\r\n}\r\n","import React, { useRef, useEffect } from 'react';\r\nimport { IVideoTrack } from '../../types';\r\nimport { styled } from '@material-ui/core/styles';\r\nimport { Track } from 'twilio-video';\r\n\r\nconst Video = styled('video')({\r\n  width: '100%',\r\n  maxHeight: '100%',\r\n  objectFit: 'contain',\r\n});\r\n\r\ninterface VideoTrackProps {\r\n  track: IVideoTrack;\r\n  isLocal?: boolean;\r\n  priority?: Track.Priority | null;\r\n}\r\n\r\nexport default function VideoTrack({ track, isLocal, priority }: VideoTrackProps) {\r\n  const ref = useRef<HTMLVideoElement>(null!);\r\n\r\n  useEffect(() => {\r\n    const el = ref.current;\r\n    el.muted = true;\r\n    if (track.setPriority && priority) {\r\n      track.setPriority(priority);\r\n    }\r\n    track.attach(el);\r\n    return () => {\r\n      track.detach(el);\r\n      if (track.setPriority && priority) {\r\n        // Passing `null` to setPriority will set the track's priority to that which it was published with.\r\n        track.setPriority(null);\r\n      }\r\n    };\r\n  }, [track, priority]);\r\n\r\n  // The local video track is mirrored.\r\n  const isFrontFacing = track.mediaStreamTrack.getSettings().facingMode !== 'environment';\r\n  const style = isLocal && isFrontFacing ? { transform: 'rotateY(180deg)' } : {};\r\n\r\n  return <Video ref={ref} style={style} />;\r\n}\r\n","import React from 'react';\r\nimport { LocalVideoTrack } from 'twilio-video';\r\nimport VideoTrack from '../VideoTrack/VideoTrack';\r\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\r\n\r\nexport default function LocalVideoPreview() {\r\n  const { localTracks } = useVideoContext();\r\n\r\n  const videoTrack = localTracks.find(track => track.name === 'camera') as LocalVideoTrack;\r\n\r\n  return videoTrack ? <VideoTrack track={videoTrack} isLocal /> : null;\r\n}\r\n","import React, { useEffect, useRef } from 'react';\r\nimport { AudioTrack, LocalAudioTrack, RemoteAudioTrack } from 'twilio-video';\r\nimport { interval } from 'd3-timer';\r\nimport MicOff from '@material-ui/icons/MicOff';\r\nimport useIsTrackEnabled from '../../hooks/useIsTrackEnabled/useIsTrackEnabled';\r\n\r\nlet clipId = 0;\r\nconst getUniqueClipId = () => clipId++;\r\n\r\n// @ts-ignore\r\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\r\nlet audioContext: AudioContext;\r\n\r\nexport function initializeAnalyser(audioTrack: AudioTrack) {\r\n  audioContext = audioContext || new AudioContext();\r\n  const stream = new MediaStream([audioTrack.mediaStreamTrack.clone()]);\r\n  const audioSource = audioContext.createMediaStreamSource(stream);\r\n\r\n  const analyser = audioContext.createAnalyser();\r\n  analyser.smoothingTimeConstant = 0.4;\r\n  analyser.fftSize = 512;\r\n\r\n  audioSource.connect(analyser);\r\n  return analyser;\r\n}\r\n\r\nfunction AudioLevelIndicator({\r\n  size,\r\n  audioTrack,\r\n  background,\r\n}: {\r\n  size?: number;\r\n  audioTrack?: AudioTrack;\r\n  background?: string;\r\n}) {\r\n  const SIZE = size || 24;\r\n  const ref = useRef<SVGRectElement>(null);\r\n  const isTrackEnabled = useIsTrackEnabled(audioTrack as LocalAudioTrack | RemoteAudioTrack);\r\n\r\n  useEffect(() => {\r\n    const SVGClipElement = ref.current;\r\n\r\n    if (audioTrack && isTrackEnabled && SVGClipElement) {\r\n      let analyser = initializeAnalyser(audioTrack);\r\n\r\n      const reinitializeAnalyser = () => {\r\n        analyser = initializeAnalyser(audioTrack);\r\n      };\r\n\r\n      // Here we reinitialize the AnalyserNode on focus to avoid an issue in Safari\r\n      // where the analysers stop functioning when the user switches to a new tab\r\n      // and switches back to the app.\r\n      window.addEventListener('focus', reinitializeAnalyser);\r\n\r\n      const sampleArray = new Uint8Array(analyser.frequencyBinCount);\r\n\r\n      const timer = interval(() => {\r\n        analyser.getByteFrequencyData(sampleArray);\r\n        let values = 0;\r\n\r\n        const length = sampleArray.length;\r\n        for (let i = 0; i < length; i++) {\r\n          values += sampleArray[i];\r\n        }\r\n\r\n        const volume = Math.min(21, Math.max(0, Math.log10(values / length / 3) * 14));\r\n\r\n        SVGClipElement?.setAttribute('y', String(21 - volume));\r\n      }, 50);\r\n\r\n      return () => {\r\n        SVGClipElement.setAttribute('y', '21');\r\n        timer.stop();\r\n        window.removeEventListener('focus', reinitializeAnalyser);\r\n      };\r\n    }\r\n  }, [audioTrack, isTrackEnabled]);\r\n\r\n  // Each instance of this component will need a unique HTML ID\r\n  const clipPathId = `audio-level-clip-${getUniqueClipId()}`;\r\n\r\n  return isTrackEnabled ? (\r\n    <svg focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" height={`${SIZE}px`} width={`${SIZE}px`}>\r\n      <defs>\r\n        <clipPath id={clipPathId}>\r\n          <rect ref={ref} x=\"0\" y=\"21\" width=\"24\" height=\"24\" />\r\n        </clipPath>\r\n      </defs>\r\n      <path\r\n        fill={background || 'rgba(255, 255, 255, 0.1)'}\r\n        d=\"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"\r\n      ></path>\r\n      <path\r\n        fill=\"#0c0\"\r\n        clipPath={`url(#${clipPathId})`}\r\n        d=\"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"\r\n      ></path>\r\n    </svg>\r\n  ) : (\r\n    <MicOff\r\n      height={`${SIZE}px`}\r\n      width={`${SIZE}px`}\r\n      style={{ width: 'initial', height: 'initial' }}\r\n      data-cy-audio-mute-icon\r\n    />\r\n  );\r\n}\r\n\r\nexport default React.memo(AudioLevelIndicator);\r\n","import React from 'react';\r\nimport { LocalAudioTrack } from 'twilio-video';\r\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\r\nimport AudioLevelIndicator from '../../AudioLevelIndicator/AudioLevelIndicator';\r\n\r\nexport default function LocalAudioLevelIndicator() {\r\n  const { localTracks } = useVideoContext();\r\n  const audioTrack = localTracks.find(track => track.kind === 'audio') as LocalAudioTrack;\r\n\r\n  return <AudioLevelIndicator size={30} audioTrack={audioTrack} />;\r\n}\r\n","import React from 'react';\r\n\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport useFullScreenToggle from '../../../hooks/useFullScreenToggle/useFullScreenToggle';\r\n\r\nexport default function ToggleFullscreenButton() {\r\n  const [isFullScreen, toggleFullScreen] = useFullScreenToggle();\r\n\r\n  return (\r\n    <IconButton aria-label={`full screen`} onClick={toggleFullScreen}>\r\n      {isFullScreen ? <FullscreenExitIcon /> : <FullscreenIcon />}\r\n    </IconButton>\r\n  );\r\n}\r\n","import { useCallback, useState, useEffect } from 'react';\r\nimport fscreen from 'fscreen';\r\n\r\nexport default function useFullScreenToggle() {\r\n  const [isFullScreen, setIsFullScreen] = useState<Boolean>(!!fscreen.fullscreenElement);\r\n\r\n  useEffect(() => {\r\n    const onFullScreenChange = () => setIsFullScreen(!!fscreen.fullscreenElement);\r\n    fscreen.addEventListener('fullscreenchange', onFullScreenChange);\r\n    return () => {\r\n      fscreen.removeEventListener('fullscreenchange', onFullScreenChange);\r\n    };\r\n  }, []);\r\n\r\n  const toggleFullScreen = useCallback(() => {\r\n    isFullScreen ? fscreen.exitFullscreen() : fscreen.requestFullscreen(document.documentElement);\r\n  }, [isFullScreen]);\r\n\r\n  return [isFullScreen, toggleFullScreen] as const;\r\n}\r\n","import React, { PropsWithChildren } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport { version as appVersion } from '../../../../package.json';\r\nimport Video from 'twilio-video';\r\n\r\ninterface AboutDialogProps {\r\n  open: boolean;\r\n  onClose(): void;\r\n}\r\n\r\nfunction AboutDialog({ open, onClose }: PropsWithChildren<AboutDialogProps>) {\r\n  return (\r\n    <Dialog open={open} onClose={onClose} fullWidth={true} maxWidth=\"xs\">\r\n      <DialogTitle>About:</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>Browser supported: {String(Video.isSupported)}</DialogContentText>\r\n        <DialogContentText>SDK Version: {Video.version}</DialogContentText>\r\n        <DialogContentText>App Version: {appVersion}</DialogContentText>\r\n        <DialogContentText>Deployed Tag: {process.env.REACT_APP_GIT_TAG || 'N/A'}</DialogContentText>\r\n        <DialogContentText>Deployed Commit Hash: {process.env.REACT_APP_GIT_COMMIT || 'N/A'}</DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose} color=\"primary\" autoFocus>\r\n          OK\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default AboutDialog;\r\n","import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport makeStyles from '@material-ui/styles/makeStyles';\r\nimport Person from '@material-ui/icons/Person';\r\nimport { StateContextType } from '../../../state';\r\n\r\nconst useStyles = makeStyles({\r\n  red: {\r\n    color: 'white',\r\n    backgroundColor: '#F22F46',\r\n  },\r\n});\r\n\r\nexport function getInitials(name: string) {\r\n  return name\r\n    .split(' ')\r\n    .map(text => text[0])\r\n    .join('')\r\n    .toUpperCase();\r\n}\r\n\r\nexport default function UserAvatar({ user }: { user: StateContextType['user'] }) {\r\n  const classes = useStyles();\r\n  const { displayName, photoURL } = user!;\r\n\r\n  return photoURL ? (\r\n    <Avatar src={photoURL} />\r\n  ) : (\r\n    <Avatar className={classes.red}>{displayName ? getInitials(displayName) : <Person />}</Avatar>\r\n  );\r\n}\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n};\r\n\r\nexport default function useFirebaseAuth() {\r\n  const [user, setUser] = useState<firebase.User | null>(null);\r\n  const [isAuthReady, setIsAuthReady] = useState(false);\r\n\r\n  const getToken = useCallback(\r\n    async (identity: string, roomName: string) => {\r\n      const headers = new window.Headers();\r\n\r\n      const idToken = await user!.getIdToken();\r\n      headers.set('Authorization', idToken);\r\n\r\n      const endpoint = process.env.REACT_APP_TOKEN_ENDPOINT || '/token';\r\n      const params = new window.URLSearchParams({ identity, roomName });\r\n\r\n      return fetch(`${endpoint}?${params}`, { headers }).then(res => res.text());\r\n    },\r\n    [user]\r\n  );\r\n\r\n  useEffect(() => {\r\n    firebase.initializeApp(firebaseConfig);\r\n    firebase.auth().onAuthStateChanged(user => {\r\n      setUser(user);\r\n      setIsAuthReady(true);\r\n    });\r\n  }, []);\r\n\r\n  const signIn = useCallback(() => {\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n    provider.addScope('https://www.googleapis.com/auth/plus.login');\r\n\r\n    return firebase\r\n      .auth()\r\n      .signInWithPopup(provider)\r\n      .then(user => {\r\n        setUser(user.user);\r\n      });\r\n  }, []);\r\n\r\n  const signOut = useCallback(() => {\r\n    return firebase\r\n      .auth()\r\n      .signOut()\r\n      .then(() => {\r\n        setUser(null);\r\n      });\r\n  }, []);\r\n\r\n  return { user, signIn, signOut, isAuthReady, getToken };\r\n}\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport function getPasscode() {\r\n  const match = window.location.search.match(/passcode=(.*)&?/);\r\n  const passcode = match ? match[1] : window.sessionStorage.getItem('passcode');\r\n  return passcode;\r\n}\r\n\r\nexport function fetchToken(name: string, room: string, passcode: string) {\r\n  return fetch(`/token`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ user_identity: name, room_name: room, passcode }),\r\n  });\r\n}\r\n\r\nexport function verifyPasscode(passcode: string) {\r\n  return fetchToken('temp-name', 'temp-room', passcode).then(async res => {\r\n    const jsonResponse = await res.json();\r\n    if (res.status === 401) {\r\n      return { isValid: false, error: jsonResponse.error?.message };\r\n    }\r\n\r\n    if (res.ok && jsonResponse.token) {\r\n      return { isValid: true };\r\n    }\r\n  });\r\n}\r\n\r\nexport function getErrorMessage(message: string) {\r\n  switch (message) {\r\n    case 'passcode incorrect':\r\n      return 'Passcode is incorrect';\r\n    case 'passcode expired':\r\n      return 'Passcode has expired';\r\n    default:\r\n      return message;\r\n  }\r\n}\r\n\r\nexport default function usePasscodeAuth() {\r\n  const history = useHistory();\r\n\r\n  const [user, setUser] = useState<{ displayName: undefined; photoURL: undefined; passcode: string } | null>(null);\r\n  const [isAuthReady, setIsAuthReady] = useState(false);\r\n\r\n  const getToken = useCallback(\r\n    (name: string, room: string) => {\r\n      return fetchToken(name, room, user!.passcode)\r\n        .then(async res => {\r\n          if (res.ok) {\r\n            return res;\r\n          }\r\n          const json = await res.json();\r\n          const errorMessage = getErrorMessage(json.error?.message || res.statusText);\r\n          throw Error(errorMessage);\r\n        })\r\n        .then(res => res.json())\r\n        .then(res => res.token as string);\r\n    },\r\n    [user]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const passcode = getPasscode();\r\n\r\n    if (passcode) {\r\n      verifyPasscode(passcode)\r\n        .then(verification => {\r\n          if (verification?.isValid) {\r\n            setUser({ passcode } as any);\r\n            window.sessionStorage.setItem('passcode', passcode);\r\n            history.replace(window.location.pathname);\r\n          }\r\n        })\r\n        .then(() => setIsAuthReady(true));\r\n    } else {\r\n      setIsAuthReady(true);\r\n    }\r\n  }, [history]);\r\n\r\n  const signIn = useCallback((passcode: string) => {\r\n    return verifyPasscode(passcode).then(verification => {\r\n      if (verification?.isValid) {\r\n        setUser({ passcode } as any);\r\n        window.sessionStorage.setItem('passcode', passcode);\r\n      } else {\r\n        throw new Error(getErrorMessage(verification?.error));\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const signOut = useCallback(() => {\r\n    setUser(null);\r\n    window.sessionStorage.removeItem('passcode');\r\n    return Promise.resolve();\r\n  }, []);\r\n\r\n  return { user, isAuthReady, getToken, signIn, signOut };\r\n}\r\n","import React, { createContext, useContext, useState } from 'react';\r\nimport { TwilioError } from 'twilio-video';\r\nimport useFirebaseAuth from './useFirebaseAuth/useFirebaseAuth';\r\nimport usePasscodeAuth from './usePasscodeAuth/usePasscodeAuth';\r\nimport { User } from 'firebase';\r\n\r\nexport function getAccessToken(identity: string, room: string): string {\r\n  var AccessToken = require('twilio').jwt.AccessToken;\r\n  var VideoGrant = AccessToken.VideoGrant;\r\n\r\n  // Substitute your Twilio AccountSid and ApiKey details\r\n  var ACCOUNT_SID = 'AC906a43ccc19bdd03625c78813a7d9d5b';\r\n  var API_KEY_SID = 'SK7908c3328f09311299c5c491db91a9d8';\r\n  var API_KEY_SECRET = 'WJwT66yfKLQlj4D4dhuYXvY1drp3Ds5t';\r\n\r\n  // Create an Access Token\r\n  var accessToken = new AccessToken(\r\n      ACCOUNT_SID,\r\n      API_KEY_SID,\r\n      API_KEY_SECRET\r\n  );\r\n\r\n  // Set the Identity of this token\r\n  accessToken.identity = identity;\r\n\r\n  // Grant access to Video\r\n  var grant = new VideoGrant();\r\n  grant.room = room;\r\n  accessToken.addGrant(grant);\r\n\r\n  // Serialize the token as a JWT\r\n  var jwt = accessToken.toJwt();\r\n  console.log('jwt', jwt);\r\n  return jwt;\r\n}\r\n\r\nexport interface StateContextType {\r\n  error: TwilioError | null;\r\n  setError(error: TwilioError | null): void;\r\n  getToken(name: string, room: string, passcode?: string): Promise<any>;\r\n  user?: User | null | { displayName: undefined; photoURL: undefined; passcode?: string };\r\n  signIn?(passcode?: string): Promise<void>;\r\n  signOut?(): Promise<void>;\r\n  isAuthReady?: boolean;\r\n  isFetching: boolean;\r\n}\r\n\r\nexport const StateContext = createContext<StateContextType>(null!);\r\n\r\n/*\r\n  The 'react-hooks/rules-of-hooks' linting rules prevent React Hooks fron being called\r\n  inside of if() statements. This is because hooks must always be called in the same order\r\n  every time a component is rendered. The 'react-hooks/rules-of-hooks' rule is disabled below\r\n  because the \"if (process.env.REACT_APP_SET_AUTH === 'firebase')\" statements are evaluated\r\n  at build time (not runtime). If the statement evaluates to false, then the code is not\r\n  included in the bundle that is produced (due to tree-shaking). Thus, in this instance, it\r\n  is ok to call hooks inside if() statements.\r\n*/\r\nexport default function AppStateProvider(props: React.PropsWithChildren<{}>) {\r\n  const [error, setError] = useState<TwilioError | null>(null);\r\n  const [isFetching, setIsFetching] = useState(false);\r\n\r\n  let contextValue = {\r\n    error,\r\n    setError,\r\n    isFetching,\r\n  } as StateContextType;\r\n\r\n  if (process.env.REACT_APP_SET_AUTH === 'firebase') {\r\n    contextValue = {\r\n      ...contextValue,\r\n      ...useFirebaseAuth(), // eslint-disable-line react-hooks/rules-of-hooks\r\n    };\r\n  } else if (process.env.REACT_APP_SET_AUTH === 'passcode') {\r\n    contextValue = {\r\n      ...contextValue,\r\n      ...usePasscodeAuth(), // eslint-disable-line react-hooks/rules-of-hooks\r\n    };\r\n  } else {\r\n    contextValue = {\r\n      ...contextValue,\r\n      getToken: async (identity, roomName) => {\r\n        const headers = new window.Headers();\r\n        const endpoint = process.env.REACT_APP_TOKEN_ENDPOINT || '/token';\r\n        const params = new window.URLSearchParams({ identity, roomName });\r\n\r\n        return fetch(`https://94fyda15f0.execute-api.us-east-1.amazonaws.com/Prod/api/members/${identity}/token`).then(res => res.text());\r\n      },\r\n    };\r\n  }\r\n\r\n  const getToken: StateContextType['getToken'] = (name, room) => {\r\n    setIsFetching(true);\r\n    return contextValue\r\n      .getToken(name, room)\r\n      .then(res => {\r\n        setIsFetching(false);\r\n        console.log('res', res)\r\n        return getAccessToken(name, room);\r\n      })\r\n      .catch(err => {\r\n        setError(err);\r\n        setIsFetching(false);\r\n        return Promise.reject(err);\r\n      });\r\n  };\r\n\r\n  return <StateContext.Provider value={{ ...contextValue, getToken }}>{props.children}</StateContext.Provider>;\r\n}\r\n\r\nexport function useAppState() {\r\n  const context = useContext(StateContext);\r\n  if (!context) {\r\n    throw new Error('useAppState must be used within the AppStateProvider');\r\n  }\r\n  return context;\r\n}\r\n","import React, { useState, useRef, useCallback } from 'react';\r\nimport AboutDialog from '../AboutDialog/AboutDialog';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuContainer from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MoreIcon from '@material-ui/icons/MoreVert';\r\nimport UserAvatar from '../UserAvatar/UserAvatar';\r\n\r\nimport { useAppState } from '../../../state';\r\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\r\n\r\nexport default function Menu() {\r\n  const { user, signOut } = useAppState();\r\n  const { room, localTracks } = useVideoContext();\r\n\r\n  const [aboutOpen, setAboutOpen] = useState(false);\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n\r\n  const anchorRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleSignOut = useCallback(() => {\r\n    room.disconnect?.();\r\n    localTracks.forEach(track => track.stop());\r\n    signOut?.();\r\n  }, [room.disconnect, localTracks, signOut]);\r\n\r\n  return (\r\n    <div ref={anchorRef}>\r\n      <IconButton color=\"inherit\" onClick={() => setMenuOpen(state => !state)}>\r\n        {user ? <UserAvatar user={user} /> : <MoreIcon />}\r\n      </IconButton>\r\n      <MenuContainer open={menuOpen} onClose={() => setMenuOpen(state => !state)} anchorEl={anchorRef.current}>\r\n        {user?.displayName && <MenuItem disabled>{user.displayName}</MenuItem>}\r\n        <MenuItem onClick={() => setAboutOpen(true)}>About</MenuItem>\r\n        {user && <MenuItem onClick={handleSignOut}>Logout</MenuItem>}\r\n      </MenuContainer>\r\n      <AboutDialog\r\n        open={aboutOpen}\r\n        onClose={() => {\r\n          setAboutOpen(false);\r\n          setMenuOpen(false);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport FlipCameraIosIcon from '@material-ui/icons/FlipCameraIos';\r\nimport { IconButton } from '@material-ui/core';\r\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\r\n\r\nexport default function FlipCameraButton() {\r\n  const {\r\n    room: { localParticipant },\r\n    localTracks,\r\n    getLocalVideoTrack,\r\n  } = useVideoContext();\r\n  const [supportsFacingMode, setSupportsFacingMode] = useState<Boolean | null>(null);\r\n  const videoTrack = localTracks.find(track => track.name === 'camera');\r\n  const facingMode = videoTrack?.mediaStreamTrack.getSettings().facingMode;\r\n\r\n  useEffect(() => {\r\n    // The 'supportsFacingMode' variable determines if this component is rendered\r\n    // If 'facingMode' exists, we will set supportsFacingMode to true.\r\n    // However, if facingMode is ever undefined again (when the user unpublishes video), we\r\n    // won't set 'supportsFacingMode' to false. This prevents the icon from briefly\r\n    // disappearing when the user switches their front/rear camera.\r\n    if (facingMode && supportsFacingMode === null) {\r\n      setSupportsFacingMode(Boolean(facingMode));\r\n    }\r\n  }, [facingMode, supportsFacingMode]);\r\n\r\n  const toggleFacingMode = useCallback(() => {\r\n    const localTrackPublication = localParticipant?.unpublishTrack(videoTrack!);\r\n    // TODO: remove when SDK implements this event. See: https://issues.corp.twilio.com/browse/JSDK-2592\r\n    localParticipant?.emit('trackUnpublished', localTrackPublication);\r\n    videoTrack!.stop();\r\n\r\n    const newFacingMode = facingMode === 'user' ? 'environment' : 'user';\r\n\r\n    getLocalVideoTrack(newFacingMode).then(newVideoTrack => {\r\n      localParticipant?.publishTrack(newVideoTrack, { priority: 'low' });\r\n    });\r\n  }, [facingMode, getLocalVideoTrack, localParticipant, videoTrack]);\r\n\r\n  return supportsFacingMode ? (\r\n    <IconButton onClick={toggleFacingMode} disabled={!videoTrack}>\r\n      <FlipCameraIosIcon />\r\n    </IconButton>\r\n  ) : null;\r\n}\r\n","import React, { ChangeEvent, FormEvent, useState, useEffect } from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport LocalAudioLevelIndicator from './LocalAudioLevelIndicator/LocalAudioLevelIndicator';\r\nimport Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ToggleFullscreenButton from './ToggleFullScreenButton/ToggleFullScreenButton';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Menu from './Menu/Menu';\r\n\r\nimport { useAppState } from '../../state';\r\nimport { useParams } from 'react-router-dom';\r\nimport useRoomState from '../../hooks/useRoomState/useRoomState';\r\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\r\nimport { Typography } from '@material-ui/core';\r\nimport FlipCameraButton from './FlipCameraButton/FlipCameraButton';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      backgroundColor: theme.palette.background.default,\r\n    },\r\n    toolbar: {\r\n      [theme.breakpoints.down('xs')]: {\r\n        padding: 0,\r\n      },\r\n    },\r\n    rightButtonContainer: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      marginLeft: 'auto',\r\n    },\r\n    form: {\r\n      display: 'flex',\r\n      flexWrap: 'wrap',\r\n      alignItems: 'center',\r\n      [theme.breakpoints.up('md')]: {\r\n        marginLeft: '2.2em',\r\n      },\r\n    },\r\n    textField: {\r\n      marginLeft: theme.spacing(1),\r\n      marginRight: theme.spacing(1),\r\n      maxWidth: 200,\r\n    },\r\n    loadingSpinner: {\r\n      marginLeft: '1em',\r\n    },\r\n    displayName: {\r\n      margin: '1.1em 0.6em',\r\n      minWidth: '200px',\r\n      fontWeight: 600,\r\n    },\r\n    joinButton: {\r\n      margin: '1em',\r\n    },\r\n  })\r\n);\r\n\r\nexport default function MenuBar() {\r\n  const classes = useStyles();\r\n  const { URLRoomName } = useParams();\r\n  const { user, getToken, isFetching } = useAppState();\r\n  const { isConnecting, connect } = useVideoContext();\r\n  const roomState = useRoomState();\r\n\r\n  const [name, setName] = useState<string>(user?.displayName || '');\r\n  const [roomName, setRoomName] = useState<string>('');\r\n\r\n  useEffect(() => {\r\n    if (URLRoomName) {\r\n      setRoomName(URLRoomName);\r\n    }\r\n  }, [URLRoomName]);\r\n\r\n  const handleNameChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n    setName(event.target.value);\r\n  };\r\n\r\n  const handleRoomNameChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n    setRoomName(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    // If this app is deployed as a twilio function, don't change the URL beacuse routing isn't supported.\r\n    if (!window.location.origin.includes('twil.io')) {\r\n      window.history.replaceState(null, '', window.encodeURI(`/room/${roomName}${window.location.search || ''}`));\r\n    }\r\n    getToken(name, roomName).then(token => connect(token));\r\n  };\r\n\r\n  return (\r\n    <AppBar className={classes.container} position=\"static\">\r\n      <Toolbar className={classes.toolbar}>\r\n        {roomState === 'disconnected' ? (\r\n          <form className={classes.form} onSubmit={handleSubmit}>\r\n            {window.location.search.includes('customIdentity=true') || !user?.displayName ? (\r\n              <TextField\r\n                id=\"menu-name\"\r\n                label=\"Name\"\r\n                className={classes.textField}\r\n                value={name}\r\n                onChange={handleNameChange}\r\n                margin=\"dense\"\r\n              />\r\n            ) : (\r\n              <Typography className={classes.displayName} variant=\"body1\">\r\n                {user.displayName}\r\n              </Typography>\r\n            )}\r\n            <TextField\r\n              id=\"menu-room\"\r\n              label=\"Room\"\r\n              className={classes.textField}\r\n              value={roomName}\r\n              onChange={handleRoomNameChange}\r\n              margin=\"dense\"\r\n            />\r\n            <Button\r\n              className={classes.joinButton}\r\n              type=\"submit\"\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              disabled={isConnecting || !name || !roomName || isFetching}\r\n            >\r\n              Join Room\r\n            </Button>\r\n            {(isConnecting || isFetching) && <CircularProgress className={classes.loadingSpinner} />}\r\n          </form>\r\n        ) : (\r\n          <h3>{roomName}</h3>\r\n        )}\r\n        <div className={classes.rightButtonContainer}>\r\n          <LocalAudioLevelIndicator />\r\n          <FlipCameraButton />\r\n          <ToggleFullscreenButton />\r\n          <Menu />\r\n        </div>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport { SnackbarContent } from '@material-ui/core';\r\n\r\nimport useRoomState from '../../hooks/useRoomState/useRoomState';\r\n\r\nconst useStyles = makeStyles({\r\n  snackbar: {\r\n    backgroundColor: '#6db1ff',\r\n  },\r\n  message: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  icon: {\r\n    marginRight: '0.8em',\r\n  },\r\n});\r\n\r\nexport default function ReconnectingNotification() {\r\n  const classes = useStyles();\r\n  const roomState = useRoomState();\r\n\r\n  return (\r\n    <Snackbar anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }} open={roomState === 'reconnecting'}>\r\n      <SnackbarContent\r\n        className={classes.snackbar}\r\n        message={\r\n          <span className={classes.message}>\r\n            <InfoIcon className={classes.icon} />\r\n            Reconnecting&hellip;\r\n          </span>\r\n        }\r\n      />\r\n    </Snackbar>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { styled } from '@material-ui/core';\r\n\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\n\r\nconst BandwidthWarningContainer = styled('div')({\r\n  position: 'absolute',\r\n  zIndex: 1,\r\n  width: '100%',\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  justifyContent: 'center',\r\n  alignItems: 'center',\r\n});\r\n\r\nconst Warning = styled('h3')({\r\n  textAlign: 'center',\r\n  margin: '0.6em 0',\r\n});\r\n\r\nexport default function BandwidthWarning() {\r\n  return (\r\n    <BandwidthWarningContainer>\r\n      <div>\r\n        <ErrorOutlineIcon fontSize=\"large\" />\r\n      </div>\r\n      <Warning>Insufficient Bandwidth</Warning>\r\n    </BandwidthWarningContainer>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { styled } from '@material-ui/core/styles';\r\n\r\nconst Container = styled('div')({\r\n  display: 'flex',\r\n  alignItems: 'flex-end',\r\n  '& div': {\r\n    width: '2px',\r\n    border: '1px solid black',\r\n    boxSizing: 'content-box',\r\n    '&:not(:last-child)': {\r\n      borderRight: 'none',\r\n    },\r\n  },\r\n});\r\n\r\nconst STEP = 3;\r\n\r\nexport default function NetworkQualityLevel({ qualityLevel }: { qualityLevel: number | null }) {\r\n  if (qualityLevel === null) return null;\r\n  return (\r\n    <Container>\r\n      {[0, 1, 2, 3, 4].map(level => (\r\n        <div\r\n          key={level}\r\n          style={{\r\n            height: `${STEP * (level + 1)}px`,\r\n            background: qualityLevel > level ? '#0c0' : '#040',\r\n          }}\r\n        />\r\n      ))}\r\n    </Container>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Participant } from 'twilio-video';\r\nimport useParticipantIsReconnecting from '../../../hooks/useParticipantIsReconnecting/useParticipantIsReconnecting';\r\nimport { Tooltip } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  indicator: {\r\n    width: '10px',\r\n    height: '10px',\r\n    borderRadius: '100%',\r\n    background: '#0c0',\r\n    display: 'inline-block',\r\n    marginRight: '3px',\r\n  },\r\n  isReconnecting: {\r\n    background: '#ffb100',\r\n  },\r\n});\r\n\r\nexport default function ParticipantConnectionIndicator({ participant }: { participant: Participant }) {\r\n  const isReconnecting = useParticipantIsReconnecting(participant);\r\n  const classes = useStyles();\r\n  return (\r\n    <Tooltip title={isReconnecting ? 'Participant is reconnecting' : 'Participant is connected'}>\r\n      <span className={clsx(classes.indicator, { [classes.isReconnecting]: isReconnecting })}></span>\r\n    </Tooltip>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { Participant } from 'twilio-video';\r\n\r\nexport default function useParticipantIsReconnecting(participant: Participant) {\r\n  const [isReconnecting, setIsReconnecting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleReconnecting = () => setIsReconnecting(true);\r\n    const handleReconnected = () => setIsReconnecting(false);\r\n\r\n    participant.on('reconnecting', handleReconnecting);\r\n    participant.on('reconnected', handleReconnected);\r\n    return () => {\r\n      participant.off('reconnecting', handleReconnecting);\r\n      participant.off('reconnected', handleReconnected);\r\n    };\r\n  }, [participant]);\r\n\r\n  return isReconnecting;\r\n}\r\n","import React from 'react';\r\nimport { Pin } from '@primer/octicons-react';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport SvgIcon from '@material-ui/core/SvgIcon';\r\n\r\nexport default function PinIcon() {\r\n  return (\r\n    <Tooltip title=\"Participant is pinned. Click to un-pin.\" placement=\"top\">\r\n      <SvgIcon style={{ float: 'right', fontSize: '29px' }}>\r\n        <Pin />\r\n      </SvgIcon>\r\n    </Tooltip>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { LocalTrackPublication, Participant, RemoteTrackPublication } from 'twilio-video';\r\n\r\ntype TrackPublication = LocalTrackPublication | RemoteTrackPublication;\r\n\r\nexport default function usePublications(participant: Participant) {\r\n  const [publications, setPublications] = useState<TrackPublication[]>([]);\r\n\r\n  useEffect(() => {\r\n    // Reset the publications when the 'participant' variable changes.\r\n    setPublications(Array.from(participant.tracks.values()) as TrackPublication[]);\r\n\r\n    const publicationAdded = (publication: TrackPublication) =>\r\n      setPublications(prevPublications => [...prevPublications, publication]);\r\n    const publicationRemoved = (publication: TrackPublication) =>\r\n      setPublications(prevPublications => prevPublications.filter(p => p !== publication));\r\n\r\n    participant.on('trackPublished', publicationAdded);\r\n    participant.on('trackUnpublished', publicationRemoved);\r\n    return () => {\r\n      participant.off('trackPublished', publicationAdded);\r\n      participant.off('trackUnpublished', publicationRemoved);\r\n    };\r\n  }, [participant]);\r\n\r\n  return publications;\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { LocalVideoTrack, RemoteVideoTrack } from 'twilio-video';\r\n\r\ntype TrackType = RemoteVideoTrack | LocalVideoTrack | undefined | null;\r\n\r\n// The 'switchedOff' event is emitted when there is not enough bandwidth to support\r\n// a track. See: https://www.twilio.com/docs/video/tutorials/using-bandwidth-profile-api#understanding-track-switch-offs\r\n\r\nexport default function useIsTrackSwitchedOff(track: TrackType) {\r\n  const [isSwitchedOff, setIsSwitchedOff] = useState(track && track.isSwitchedOff);\r\n\r\n  useEffect(() => {\r\n    // Reset the value if the 'track' variable changes\r\n    setIsSwitchedOff(track && track.isSwitchedOff);\r\n\r\n    if (track) {\r\n      const handleSwitchedOff = () => setIsSwitchedOff(true);\r\n      const handleSwitchedOn = () => setIsSwitchedOff(false);\r\n      track.on('switchedOff', handleSwitchedOff);\r\n      track.on('switchedOn', handleSwitchedOn);\r\n      return () => {\r\n        track.off('switchedOff', handleSwitchedOff);\r\n        track.off('switchedOn', handleSwitchedOn);\r\n      };\r\n    }\r\n  }, [track]);\r\n\r\n  return !!isSwitchedOff;\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { LocalTrackPublication, RemoteTrackPublication } from 'twilio-video';\r\n\r\nexport default function useTrack(publication: LocalTrackPublication | RemoteTrackPublication | undefined) {\r\n  const [track, setTrack] = useState(publication && publication.track);\r\n\r\n  useEffect(() => {\r\n    // Reset the track when the 'publication' variable changes.\r\n    setTrack(publication && publication.track);\r\n\r\n    if (publication) {\r\n      const removeTrack = () => setTrack(null);\r\n\r\n      publication.on('subscribed', setTrack);\r\n      publication.on('unsubscribed', removeTrack);\r\n      return () => {\r\n        publication.off('subscribed', setTrack);\r\n        publication.off('unsubscribed', removeTrack);\r\n      };\r\n    }\r\n  }, [publication]);\r\n\r\n  return track;\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { LocalAudioTrack, LocalVideoTrack, Participant, RemoteAudioTrack, RemoteVideoTrack } from 'twilio-video';\r\n\r\nimport AudioLevelIndicator from '../AudioLevelIndicator/AudioLevelIndicator';\r\nimport BandwidthWarning from '../BandwidthWarning/BandwidthWarning';\r\nimport NetworkQualityLevel from '../NewtorkQualityLevel/NetworkQualityLevel';\r\nimport ParticipantConnectionIndicator from './ParticipantConnectionIndicator/ParticipantConnectionIndicator';\r\nimport PinIcon from './PinIcon/PinIcon';\r\nimport ScreenShare from '@material-ui/icons/ScreenShare';\r\nimport VideocamOff from '@material-ui/icons/VideocamOff';\r\n\r\nimport useParticipantNetworkQualityLevel from '../../hooks/useParticipantNetworkQualityLevel/useParticipantNetworkQualityLevel';\r\nimport usePublications from '../../hooks/usePublications/usePublications';\r\nimport useIsTrackSwitchedOff from '../../hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff';\r\nimport useTrack from '../../hooks/useTrack/useTrack';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      position: 'relative',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      height: `${(theme.sidebarWidth * 9) / 16}px`,\r\n      overflow: 'hidden',\r\n      cursor: 'pointer',\r\n      '& video': {\r\n        filter: 'none',\r\n      },\r\n      '& svg': {\r\n        stroke: 'black',\r\n        strokeWidth: '0.8px',\r\n      },\r\n      [theme.breakpoints.down('xs')]: {\r\n        height: theme.sidebarMobileHeight,\r\n        width: `${(theme.sidebarMobileHeight * 16) / 9}px`,\r\n        marginRight: '3px',\r\n        fontSize: '10px',\r\n      },\r\n    },\r\n    isVideoSwitchedOff: {\r\n      '& video': {\r\n        filter: 'blur(4px) grayscale(1) brightness(0.5)',\r\n      },\r\n    },\r\n    infoContainer: {\r\n      position: 'absolute',\r\n      zIndex: 1,\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      justifyContent: 'space-between',\r\n      height: '100%',\r\n      padding: '0.4em',\r\n      width: '100%',\r\n      background: 'transparent',\r\n    },\r\n    hideVideo: {\r\n      background: 'black',\r\n    },\r\n    identity: {\r\n      background: 'rgba(0, 0, 0, 0.7)',\r\n      padding: '0.1em 0.3em',\r\n      margin: 0,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n    },\r\n    infoRow: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n    },\r\n  })\r\n);\r\n\r\ninterface ParticipantInfoProps {\r\n  participant: Participant;\r\n  children: React.ReactNode;\r\n  onClick: () => void;\r\n  isSelected: boolean;\r\n}\r\n\r\nexport default function ParticipantInfo({ participant, onClick, isSelected, children }: ParticipantInfoProps) {\r\n  const publications = usePublications(participant);\r\n\r\n  const audioPublication = publications.find(p => p.kind === 'audio');\r\n  const videoPublication = publications.find(p => p.trackName === 'camera');\r\n\r\n  const networkQualityLevel = useParticipantNetworkQualityLevel(participant);\r\n  const isVideoEnabled = Boolean(videoPublication);\r\n  const isScreenShareEnabled = publications.find(p => p.trackName === 'screen');\r\n\r\n  const videoTrack = useTrack(videoPublication);\r\n  const isVideoSwitchedOff = useIsTrackSwitchedOff(videoTrack as LocalVideoTrack | RemoteVideoTrack);\r\n\r\n  const audioTrack = useTrack(audioPublication) as LocalAudioTrack | RemoteAudioTrack;\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div\r\n      className={clsx(classes.container, {\r\n        [classes.isVideoSwitchedOff]: isVideoSwitchedOff,\r\n      })}\r\n      onClick={onClick}\r\n      data-cy-participant={participant.identity}\r\n    >\r\n      <div className={clsx(classes.infoContainer, { [classes.hideVideo]: !isVideoEnabled })}>\r\n        <div className={classes.infoRow}>\r\n          <h4 className={classes.identity}>\r\n            <ParticipantConnectionIndicator participant={participant} />\r\n            {participant.identity}\r\n          </h4>\r\n          <NetworkQualityLevel qualityLevel={networkQualityLevel} />\r\n        </div>\r\n        <div>\r\n          <AudioLevelIndicator audioTrack={audioTrack} background=\"white\" />\r\n          {!isVideoEnabled && <VideocamOff />}\r\n          {isScreenShareEnabled && <ScreenShare />}\r\n          {isSelected && <PinIcon />}\r\n        </div>\r\n      </div>\r\n      {isVideoSwitchedOff && <BandwidthWarning />}\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { Participant } from 'twilio-video';\r\n\r\nexport default function useParticipantNetworkQualityLevel(participant: Participant) {\r\n  const [networkQualityLevel, setNetworkQualityLevel] = useState(participant.networkQualityLevel);\r\n\r\n  useEffect(() => {\r\n    const handleNewtorkQualityLevelChange = (newNetworkQualityLevel: number) =>\r\n      setNetworkQualityLevel(newNetworkQualityLevel);\r\n\r\n    setNetworkQualityLevel(participant.networkQualityLevel);\r\n    participant.on('networkQualityLevelChanged', handleNewtorkQualityLevelChange);\r\n    return () => {\r\n      participant.off('networkQualityLevelChanged', handleNewtorkQualityLevelChange);\r\n    };\r\n  }, [participant]);\r\n\r\n  return networkQualityLevel;\r\n}\r\n","import { useEffect } from 'react';\r\nimport { AudioTrack as IAudioTrack } from 'twilio-video';\r\n\r\ninterface AudioTrackProps {\r\n  track: IAudioTrack;\r\n}\r\n\r\nexport default function AudioTrack({ track }: AudioTrackProps) {\r\n  useEffect(() => {\r\n    document.body.appendChild(track.attach());\r\n    return () => track.detach().forEach(el => el.remove());\r\n  }, [track]);\r\n  return null;\r\n}\r\n","import React from 'react';\r\nimport useTrack from '../../hooks/useTrack/useTrack';\r\nimport AudioTrack from '../AudioTrack/AudioTrack';\r\nimport VideoTrack from '../VideoTrack/VideoTrack';\r\n\r\nimport { IVideoTrack } from '../../types';\r\nimport {\r\n  AudioTrack as IAudioTrack,\r\n  LocalTrackPublication,\r\n  Participant,\r\n  RemoteTrackPublication,\r\n  Track,\r\n} from 'twilio-video';\r\n\r\ninterface PublicationProps {\r\n  publication: LocalTrackPublication | RemoteTrackPublication;\r\n  participant: Participant;\r\n  isLocal: boolean;\r\n  disableAudio?: boolean;\r\n  videoPriority?: Track.Priority | null;\r\n}\r\n\r\nexport default function Publication({ publication, isLocal, disableAudio, videoPriority }: PublicationProps) {\r\n  const track = useTrack(publication);\r\n\r\n  if (!track) return null;\r\n\r\n  switch (track.kind) {\r\n    case 'video':\r\n      return (\r\n        <VideoTrack\r\n          track={track as IVideoTrack}\r\n          priority={videoPriority}\r\n          isLocal={track.name === 'camera' && isLocal}\r\n        />\r\n      );\r\n    case 'audio':\r\n      return disableAudio ? null : <AudioTrack track={track as IAudioTrack} />;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { Participant, Track } from 'twilio-video';\r\nimport Publication from '../Publication/Publication';\r\nimport usePublications from '../../hooks/usePublications/usePublications';\r\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\r\n\r\ninterface ParticipantTracksProps {\r\n  participant: Participant;\r\n  disableAudio?: boolean;\r\n  enableScreenShare?: boolean;\r\n  videoPriority?: Track.Priority | null;\r\n}\r\n\r\n/*\r\n *  The object model for the Room object (found here: https://www.twilio.com/docs/video/migrating-1x-2x#object-model) shows\r\n *  that Participant objects have TrackPublications, and TrackPublication objects have Tracks.\r\n *\r\n *  The React components in this application follow the same pattern. This ParticipantTracks component renders Publications,\r\n *  and the Publication component renders Tracks.\r\n */\r\n\r\nexport default function ParticipantTracks({\r\n  participant,\r\n  disableAudio,\r\n  enableScreenShare,\r\n  videoPriority,\r\n}: ParticipantTracksProps) {\r\n  const { room } = useVideoContext();\r\n  const publications = usePublications(participant);\r\n  const isLocal = participant === room.localParticipant;\r\n\r\n  let filteredPublications;\r\n\r\n  if (enableScreenShare && publications.some(p => p.trackName === 'screen')) {\r\n    filteredPublications = publications.filter(p => p.trackName !== 'camera');\r\n  } else {\r\n    filteredPublications = publications.filter(p => p.trackName !== 'screen');\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {filteredPublications.map(publication => (\r\n        <Publication\r\n          key={publication.kind}\r\n          publication={publication}\r\n          participant={participant}\r\n          isLocal={isLocal}\r\n          disableAudio={disableAudio}\r\n          videoPriority={videoPriority}\r\n        />\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ParticipantInfo from '../ParticipantInfo/ParticipantInfo';\r\nimport ParticipantTracks from '../ParticipantTracks/ParticipantTracks';\r\nimport { Participant as IParticipant } from 'twilio-video';\r\n\r\ninterface ParticipantProps {\r\n  participant: IParticipant;\r\n  disableAudio?: boolean;\r\n  enableScreenShare?: boolean;\r\n  onClick: () => void;\r\n  isSelected: boolean;\r\n}\r\n\r\nexport default function Participant({\r\n  participant,\r\n  disableAudio,\r\n  enableScreenShare,\r\n  onClick,\r\n  isSelected,\r\n}: ParticipantProps) {\r\n  return (\r\n    <ParticipantInfo participant={participant} onClick={onClick} isSelected={isSelected}>\r\n      <ParticipantTracks participant={participant} disableAudio={disableAudio} enableScreenShare={enableScreenShare} />\r\n    </ParticipantInfo>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport useVideoContext from '../useVideoContext/useVideoContext';\r\nimport { RemoteParticipant } from 'twilio-video';\r\n\r\nexport default function useDominantSpeaker() {\r\n  const { room } = useVideoContext();\r\n  const [dominantSpeaker, setDominantSpeaker] = useState(room.dominantSpeaker);\r\n\r\n  useEffect(() => {\r\n    // Sometimes, the 'dominantSpeakerChanged' event can emit 'null', which means that\r\n    // there is no dominant speaker. If we change the main participant when 'null' is\r\n    // emitted, the effect can be jarring to the user. Here we ignore any 'null' values\r\n    // and continue to display the previous dominant speaker as the main participant.\r\n    const handleDominantSpeakerChanged = (newDominantSpeaker: RemoteParticipant) => {\r\n      if (newDominantSpeaker !== null) {\r\n        setDominantSpeaker(newDominantSpeaker);\r\n      }\r\n    };\r\n\r\n    // Since 'null' values are ignored, we will need to listen for the 'participantDisconnected'\r\n    // event, so we can set the dominantSpeaker to 'null' when they disconnect.\r\n    const handleParticipantDisconnected = (participant: RemoteParticipant) => {\r\n      setDominantSpeaker(prevDominantSpeaker => {\r\n        return prevDominantSpeaker === participant ? null : prevDominantSpeaker;\r\n      });\r\n    };\r\n\r\n    room.on('dominantSpeakerChanged', handleDominantSpeakerChanged);\r\n    room.on('participantDisconnected', handleParticipantDisconnected);\r\n    return () => {\r\n      room.off('dominantSpeakerChanged', handleDominantSpeakerChanged);\r\n      room.off('participantDisconnected', handleParticipantDisconnected);\r\n    };\r\n  }, [room]);\r\n\r\n  return dominantSpeaker;\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { RemoteParticipant } from 'twilio-video';\r\nimport useDominantSpeaker from '../useDominantSpeaker/useDominantSpeaker';\r\nimport useVideoContext from '../useVideoContext/useVideoContext';\r\n\r\nexport default function useParticipants() {\r\n  const { room } = useVideoContext();\r\n  const dominantSpeaker = useDominantSpeaker();\r\n  const [participants, setParticipants] = useState(Array.from(room.participants.values()));\r\n\r\n  // When the dominant speaker changes, they are moved to the front of the participants array.\r\n  // This means that the most recent dominant speakers will always be near the top of the\r\n  // ParticipantStrip component.\r\n  useEffect(() => {\r\n    if (dominantSpeaker) {\r\n      setParticipants(prevParticipants => [\r\n        dominantSpeaker,\r\n        ...prevParticipants.filter(participant => participant !== dominantSpeaker),\r\n      ]);\r\n    }\r\n  }, [dominantSpeaker]);\r\n\r\n  useEffect(() => {\r\n    const participantConnected = (participant: RemoteParticipant) =>\r\n      setParticipants(prevParticipants => [...prevParticipants, participant]);\r\n    const participantDisconnected = (participant: RemoteParticipant) =>\r\n      setParticipants(prevParticipants => prevParticipants.filter(p => p !== participant));\r\n    room.on('participantConnected', participantConnected);\r\n    room.on('participantDisconnected', participantDisconnected);\r\n    return () => {\r\n      room.off('participantConnected', participantConnected);\r\n      room.off('participantDisconnected', participantDisconnected);\r\n    };\r\n  }, [room]);\r\n\r\n  return participants;\r\n}\r\n","import React from 'react';\r\nimport Participant from '../Participant/Participant';\r\nimport { styled } from '@material-ui/core/styles';\r\nimport useParticipants from '../../hooks/useParticipants/useParticipants';\r\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\r\nimport useSelectedParticipant from '../VideoProvider/useSelectedParticipant/useSelectedParticipant';\r\n\r\nconst Container = styled('aside')(({ theme }) => ({\r\n  padding: '0.5em',\r\n  overflowY: 'auto',\r\n  [theme.breakpoints.down('xs')]: {\r\n    overflowY: 'initial',\r\n    overflowX: 'auto',\r\n    padding: 0,\r\n    display: 'flex',\r\n  },\r\n}));\r\n\r\nconst ScrollContainer = styled('div')(({ theme }) => ({\r\n  [theme.breakpoints.down('xs')]: {\r\n    display: 'flex',\r\n  },\r\n}));\r\n\r\nexport default function ParticipantStrip() {\r\n  const {\r\n    room: { localParticipant },\r\n  } = useVideoContext();\r\n  const participants = useParticipants();\r\n  const [selectedParticipant, setSelectedParticipant] = useSelectedParticipant();\r\n\r\n  return (\r\n    <Container>\r\n      <ScrollContainer>\r\n        <Participant\r\n          participant={localParticipant}\r\n          isSelected={selectedParticipant === localParticipant}\r\n          onClick={() => setSelectedParticipant(localParticipant)}\r\n        />\r\n        {participants.map(participant => (\r\n          <Participant\r\n            key={participant.sid}\r\n            participant={participant}\r\n            isSelected={selectedParticipant === participant}\r\n            onClick={() => setSelectedParticipant(participant)}\r\n          />\r\n        ))}\r\n      </ScrollContainer>\r\n    </Container>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { LocalVideoTrack, Participant, RemoteVideoTrack } from 'twilio-video';\r\n\r\nimport BandwidthWarning from '../BandwidthWarning/BandwidthWarning';\r\nimport useIsTrackSwitchedOff from '../../hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff';\r\nimport usePublications from '../../hooks/usePublications/usePublications';\r\nimport useTrack from '../../hooks/useTrack/useTrack';\r\nimport VideocamOff from '@material-ui/icons/VideocamOff';\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    position: 'relative',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gridArea: 'participantList',\r\n  },\r\n  isVideoSwitchedOff: {\r\n    '& video': {\r\n      filter: 'blur(4px) grayscale(1) brightness(0.5)',\r\n    },\r\n  },\r\n  identity: {\r\n    background: 'rgba(0, 0, 0, 0.7)',\r\n    padding: '0.1em 0.3em',\r\n    margin: '1em',\r\n    fontSize: '1.2em',\r\n    display: 'inline-flex',\r\n    '& svg': {\r\n      marginLeft: '0.3em',\r\n    },\r\n  },\r\n  infoContainer: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    height: '100%',\r\n    padding: '0.4em',\r\n    width: '100%',\r\n  },\r\n});\r\n\r\ninterface MainParticipantInfoProps {\r\n  participant: Participant;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport default function MainParticipantInfo({ participant, children }: MainParticipantInfoProps) {\r\n  const classes = useStyles();\r\n\r\n  const publications = usePublications(participant);\r\n  const videoPublication = publications.find(p => p.trackName === 'camera');\r\n  const screenSharePublication = publications.find(p => p.trackName === 'screen');\r\n  const isVideoEnabled = Boolean(videoPublication);\r\n\r\n  const videoTrack = useTrack(screenSharePublication || videoPublication);\r\n  const isVideoSwitchedOff = useIsTrackSwitchedOff(videoTrack as LocalVideoTrack | RemoteVideoTrack);\r\n\r\n  return (\r\n    <div\r\n      data-cy-main-participant\r\n      className={clsx(classes.container, { [classes.isVideoSwitchedOff]: isVideoSwitchedOff })}\r\n    >\r\n      <div className={classes.infoContainer}>\r\n        <h4 className={classes.identity}>\r\n          {participant.identity}\r\n          {!isVideoEnabled && <VideocamOff />}\r\n        </h4>\r\n      </div>\r\n      {isVideoSwitchedOff && <BandwidthWarning />}\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","import MainParticipantInfo from '../MainParticipantInfo/MainParticipantInfo';\r\nimport ParticipantTracks from '../ParticipantTracks/ParticipantTracks';\r\nimport React from 'react';\r\nimport useMainSpeaker from '../../hooks/useMainSpeaker/useMainSpeaker';\r\nimport useSelectedParticipant from '../VideoProvider/useSelectedParticipant/useSelectedParticipant';\r\nimport useScreenShareParticipant from '../../hooks/useScreenShareParticipant/useScreenShareParticipant';\r\n\r\nexport default function MainParticipant() {\r\n  const mainParticipant = useMainSpeaker();\r\n  const [selectedParticipant] = useSelectedParticipant();\r\n  const screenShareParticipant = useScreenShareParticipant();\r\n\r\n  const videoPriority =\r\n    mainParticipant === selectedParticipant || mainParticipant === screenShareParticipant ? 'high' : null;\r\n\r\n  return (\r\n    /* audio is disabled for this participant component because this participant's audio \r\n       is already being rendered in the <ParticipantStrip /> component.  */\r\n    <MainParticipantInfo participant={mainParticipant}>\r\n      <ParticipantTracks participant={mainParticipant} disableAudio enableScreenShare videoPriority={videoPriority} />\r\n    </MainParticipantInfo>\r\n  );\r\n}\r\n","import useVideoContext from '../useVideoContext/useVideoContext';\r\nimport useDominantSpeaker from '../useDominantSpeaker/useDominantSpeaker';\r\nimport useParticipants from '../useParticipants/useParticipants';\r\nimport useScreenShareParticipant from '../useScreenShareParticipant/useScreenShareParticipant';\r\nimport useSelectedParticipant from '../../components/VideoProvider/useSelectedParticipant/useSelectedParticipant';\r\n\r\nexport default function useMainSpeaker() {\r\n  const [selectedParticipant] = useSelectedParticipant();\r\n  const screenShareParticipant = useScreenShareParticipant();\r\n  const dominantSpeaker = useDominantSpeaker();\r\n  const participants = useParticipants();\r\n  const {\r\n    room: { localParticipant },\r\n  } = useVideoContext();\r\n\r\n  // The participant that is returned is displayed in the main video area. Changing the order of the following\r\n  // variables will change the how the main speaker is determined.\r\n  return selectedParticipant || screenShareParticipant || dominantSpeaker || participants[0] || localParticipant;\r\n}\r\n","import React from 'react';\r\nimport ParticipantStrip from '../ParticipantStrip/ParticipantStrip';\r\nimport { styled } from '@material-ui/core/styles';\r\nimport MainParticipant from '../MainParticipant/MainParticipant';\r\n\r\nconst Container = styled('div')(({ theme }) => ({\r\n  position: 'relative',\r\n  height: '100%',\r\n  display: 'grid',\r\n  gridTemplateColumns: `${theme.sidebarWidth}px 1fr`,\r\n  gridTemplateAreas: '\". participantList\"',\r\n  [theme.breakpoints.down('xs')]: {\r\n    gridTemplateAreas: '\"participantList\" \".\"',\r\n    gridTemplateColumns: `auto`,\r\n    gridTemplateRows: `calc(100% - ${theme.sidebarMobileHeight + 12}px) ${theme.sidebarMobileHeight + 6}px`,\r\n    gridGap: '6px',\r\n  },\r\n}));\r\n\r\nexport default function Room() {\r\n  return (\r\n    <Container>\r\n      <ParticipantStrip />\r\n      <MainParticipant />\r\n    </Container>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { styled } from '@material-ui/core/styles';\r\n\r\nimport Controls from './components/Controls/Controls';\r\nimport LocalVideoPreview from './components/LocalVideoPreview/LocalVideoPreview';\r\nimport MenuBar from './components/MenuBar/MenuBar';\r\nimport ReconnectingNotification from './components/ReconnectingNotification/ReconnectingNotification';\r\nimport Room from './components/Room/Room';\r\n\r\nimport useHeight from './hooks/useHeight/useHeight';\r\nimport useRoomState from './hooks/useRoomState/useRoomState';\r\n\r\nconst Container = styled('div')({\r\n  display: 'grid',\r\n  gridTemplateRows: 'auto 1fr',\r\n});\r\n\r\nconst Main = styled('main')({\r\n  overflow: 'hidden',\r\n});\r\n\r\nexport default function App() {\r\n  const roomState = useRoomState();\r\n\r\n  // Here we would like the height of the main container to be the height of the viewport.\r\n  // On some mobile browsers, 'height: 100vh' sets the height equal to that of the screen,\r\n  // not the viewport. This looks bad when the mobile browsers location bar is open.\r\n  // We will dynamically set the height with 'window.innerHeight', which means that this\r\n  // will look good on mobile browsers even after the location bar opens or closes.\r\n  const height = useHeight();\r\n\r\n  return (\r\n    <Container style={{ height }}>\r\n      <MenuBar />\r\n      <Main>\r\n        {roomState === 'disconnected' ? <LocalVideoPreview /> : <Room />}\r\n        <Controls />\r\n      </Main>\r\n      <ReconnectingNotification />\r\n    </Container>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\n\r\nexport default function useHeight() {\r\n  const [height, setHeight] = useState(window.innerHeight);\r\n\r\n  useEffect(() => {\r\n    const onResize = () => {\r\n      setHeight(window.innerHeight);\r\n    };\r\n\r\n    window.addEventListener('resize', onResize);\r\n    return () => {\r\n      window.removeEventListener('resize', onResize);\r\n    };\r\n  });\r\n\r\n  return height + 'px';\r\n}\r\n","import React, { PropsWithChildren } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport enhanceMessage from './enhanceMessage';\r\nimport { TwilioError } from 'twilio-video';\r\n\r\ninterface ErrorDialogProps {\r\n  dismissError: Function;\r\n  error: TwilioError | null;\r\n}\r\n\r\nfunction ErrorDialog({ dismissError, error }: PropsWithChildren<ErrorDialogProps>) {\r\n  const { message, code } = error || {};\r\n  const enhancedMessage = enhanceMessage(message, code);\r\n\r\n  return (\r\n    <Dialog open={error !== null} onClose={() => dismissError()} fullWidth={true} maxWidth=\"xs\">\r\n      <DialogTitle>ERROR</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>{enhancedMessage}</DialogContentText>\r\n        {code && (\r\n          <pre>\r\n            <code>Error Code: {code}</code>\r\n          </pre>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={() => dismissError()} color=\"primary\" autoFocus>\r\n          OK\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default ErrorDialog;\r\n","// This function is used to provide error messages to the user that are\r\n// different than the error messages provided by the SDK.\r\nexport default function enhanceMessage(message = '', code?: number) {\r\n  switch (code) {\r\n    case 20101: // Invalid token error\r\n      return message + '. Please make sure you are using the correct credentials.';\r\n    default:\r\n      return message;\r\n  }\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"btn_google_light_normal_ios\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"filter\", {\n  x: \"-50%\",\n  y: \"-50%\",\n  width: \"200%\",\n  height: \"200%\",\n  filterUnits: \"objectBoundingBox\",\n  id: \"filter-1\"\n}, /*#__PURE__*/React.createElement(\"feOffset\", {\n  dx: 0,\n  dy: 1,\n  in: \"SourceAlpha\",\n  result: \"shadowOffsetOuter1\"\n}), /*#__PURE__*/React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 0.5,\n  in: \"shadowOffsetOuter1\",\n  result: \"shadowBlurOuter1\"\n}), /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n  values: \"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0\",\n  in: \"shadowBlurOuter1\",\n  type: \"matrix\",\n  result: \"shadowMatrixOuter1\"\n}), /*#__PURE__*/React.createElement(\"feOffset\", {\n  dx: 0,\n  dy: 0,\n  in: \"SourceAlpha\",\n  result: \"shadowOffsetOuter2\"\n}), /*#__PURE__*/React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 0.5,\n  in: \"shadowOffsetOuter2\",\n  result: \"shadowBlurOuter2\"\n}), /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n  values: \"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0\",\n  in: \"shadowBlurOuter2\",\n  type: \"matrix\",\n  result: \"shadowMatrixOuter2\"\n}), /*#__PURE__*/React.createElement(\"feMerge\", null, /*#__PURE__*/React.createElement(\"feMergeNode\", {\n  in: \"shadowMatrixOuter1\"\n}), /*#__PURE__*/React.createElement(\"feMergeNode\", {\n  in: \"shadowMatrixOuter2\"\n}), /*#__PURE__*/React.createElement(\"feMergeNode\", {\n  in: \"SourceGraphic\"\n}))), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"path-2\",\n  x: 0,\n  y: 0,\n  width: 40,\n  height: 40,\n  rx: 2\n}));\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Google-Button\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"9-PATCH\",\n  transform: \"translate(-608.000000, -160.000000)\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"btn_google_light_normal\",\n  transform: \"translate(-1.000000, -1.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"logo_googleg_48dp\",\n  transform: \"translate(15.000000, 15.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z\",\n  id: \"Shape\",\n  fill: \"#4285F4\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z\",\n  id: \"Shape\",\n  fill: \"#34A853\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z\",\n  id: \"Shape\",\n  fill: \"#FBBC05\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z\",\n  id: \"Shape\",\n  fill: \"#EA4335\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0,0 L18,0 L18,18 L0,18 L0,0 Z\",\n  id: \"Shape\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"handles_square\"\n})));\n\nvar SvgGoogleLogo = function SvgGoogleLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"32px\",\n    height: \"32px\",\n    viewBox: \"7 7 32 32\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgGoogleLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/google-logo.06c50bce.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.4 11.3c0 1.7-1.4 3.1-3.1 3.1S8.2 13 8.2 11.3s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1zm-3.1 4.3c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zM30 15c0 8.3-6.7 15-15 15S0 23.3 0 15 6.7 0 15 0s15 6.7 15 15zm-4 0c0-6.1-4.9-11-11-11S4 8.9 4 15s4.9 11 11 11 11-4.9 11-11zm-7.3.6c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zm0-7.4c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zm51.6-2.3c.1 0 .2.1.3.2v3.2c0 .2-.2.3-.3.3H65c-.2 0-.3-.2-.3-.3V6.2c0-.2.2-.3.3-.3h5.3zm-.1 4.5H60c-.1 0-.3.1-.3.3l-1.3 5-.1.3-1.6-5.3c0-.1-.2-.3-.3-.3h-4c-.1 0-.3.1-.3.3l-1.5 5-.1.3-.1-.3-.6-2.5-.6-2.5c0-.1-.2-.3-.3-.3h-8V6.1c0-.1-.2-.3-.4-.2l-5 1.6c-.2 0-.3.1-.3.3v2.7h-1.3c-.1 0-.3.1-.3.3v3.8c0 .1.1.3.3.3h1.3v4.7c0 3.3 1.8 4.8 5.1 4.8 1.4 0 2.7-.3 3.6-.8v-4c0-.2-.2-.3-.3-.2-.5.2-1 .3-1.4.3-.9 0-1.4-.4-1.4-1.4v-3.4h2.9c.1 0 .3-.1.3-.3v-3.2L47.8 24c0 .1.2.3.3.3h4.2c.1 0 .3-.1.3-.3l1.8-5.6.9 2.9.8 2.7c0 .1.2.3.3.3h4.2c.1 0 .3-.1.3-.3l3.8-12.6V24c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V10.7c0-.1-.1-.3-.2-.3zm6.7-4.5h-5.1c-.1 0-.3.1-.3.3v17.7c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V6.1c0-.1-.1-.2-.3-.2zm6.8 0h-5.3c-.1 0-.3.1-.3.3v3.1c0 .1.1.3.3.3h5.3c.1 0 .3-.1.3-.3V6.1c0-.1-.1-.2-.3-.2zm-.1 4.5h-5.1c-.1 0-.3.1-.3.3v13.1c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V10.7c0-.1-.1-.3-.3-.3zm16.1 6.8c0 3.8-3.2 7.1-7.7 7.1-4.4 0-7.6-3.3-7.6-7.1s3.2-7.1 7.7-7.1c4.4 0 7.6 3.3 7.6 7.1zm-5.4.1c0-1.4-1-2.5-2.2-2.4-1.3 0-2.2 1.1-2.2 2.4s1 2.4 2.2 2.4c1.3 0 2.2-1.1 2.2-2.4z\"\n});\n\nvar SvgTwilioLogo = function SvgTwilioLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"#F22F46\",\n    viewBox: \"0 0 100 30\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgTwilioLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/twilio-logo.62d2e629.svg\";\nexport { ForwardRef as ReactComponent };","import React, { ChangeEvent, useState, FormEvent } from 'react';\r\nimport { useAppState } from '../../state';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { ReactComponent as GoogleLogo } from './google-logo.svg';\r\nimport { ReactComponent as TwilioLogo } from './twilio-logo.svg';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport videoLogo from './video-logo.png';\r\n\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    height: '100vh',\r\n    background: '#0D122B',\r\n  },\r\n  twilioLogo: {\r\n    width: '55%',\r\n    display: 'block',\r\n  },\r\n  videoLogo: {\r\n    width: '25%',\r\n    padding: '2.4em 0 2.1em',\r\n  },\r\n  paper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    flexDirection: 'column',\r\n    padding: '2em',\r\n    marginTop: '4em',\r\n    background: 'white',\r\n    color: 'black',\r\n  },\r\n  button: {\r\n    color: 'black',\r\n    background: 'white',\r\n    margin: '0.8em 0 0.7em',\r\n    textTransform: 'none',\r\n  },\r\n  errorMessage: {\r\n    color: 'red',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    margin: '1em 0 0.2em',\r\n    '& svg': {\r\n      marginRight: '0.4em',\r\n    },\r\n  },\r\n});\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    type: 'light',\r\n  },\r\n});\r\n\r\nexport default function LoginPage() {\r\n  const classes = useStyles();\r\n  const { signIn, user, isAuthReady } = useAppState();\r\n  const history = useHistory();\r\n  const location = useLocation<{ from: Location }>();\r\n  const [passcode, setPasscode] = useState('');\r\n  const [authError, setAuthError] = useState<Error | null>(null);\r\n\r\n  const isAuthEnabled = Boolean(process.env.REACT_APP_SET_AUTH);\r\n\r\n  const login = () => {\r\n    setAuthError(null);\r\n    signIn?.(passcode)\r\n      .then(() => {\r\n        history.replace(location?.state?.from || { pathname: '/' });\r\n      })\r\n      .catch(err => setAuthError(err));\r\n  };\r\n\r\n  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    login();\r\n  };\r\n\r\n  if (user || !isAuthEnabled) {\r\n    history.replace('/');\r\n  }\r\n\r\n  if (!isAuthReady) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Grid container justify=\"center\" alignItems=\"flex-start\" className={classes.container}>\r\n        <Paper className={classes.paper} elevation={6}>\r\n          <TwilioLogo className={classes.twilioLogo} />\r\n          <img className={classes.videoLogo} src={videoLogo} alt=\"Video Logo\"></img>\r\n\r\n          {process.env.REACT_APP_SET_AUTH === 'firebase' && (\r\n            <Button variant=\"contained\" className={classes.button} onClick={login} startIcon={<GoogleLogo />}>\r\n              Sign in with Google\r\n            </Button>\r\n          )}\r\n\r\n          {process.env.REACT_APP_SET_AUTH === 'passcode' && (\r\n            <form onSubmit={handleSubmit}>\r\n              <Grid container alignItems=\"center\" direction=\"column\">\r\n                <TextField\r\n                  id=\"input-passcode\"\r\n                  label=\"Passcode\"\r\n                  onChange={(e: ChangeEvent<HTMLInputElement>) => setPasscode(e.target.value)}\r\n                  type=\"password\"\r\n                />\r\n                <div>\r\n                  {authError && (\r\n                    <Typography variant=\"caption\" className={classes.errorMessage}>\r\n                      <ErrorOutlineIcon />\r\n                      {authError.message}\r\n                    </Typography>\r\n                  )}\r\n                </div>\r\n                <Button variant=\"contained\" className={classes.button} type=\"submit\" disabled={!passcode.length}>\r\n                  Submit\r\n                </Button>\r\n              </Grid>\r\n            </form>\r\n          )}\r\n        </Paper>\r\n      </Grid>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\r\nimport { useAppState } from '../../state';\r\n\r\nexport default function PrivateRoute({ children, ...rest }: RouteProps) {\r\n  const { isAuthReady, user } = useAppState();\r\n    \r\n  const renderChildren = user || !process.env.REACT_APP_SET_AUTH;\r\n\r\n  if (!renderChildren && !isAuthReady) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        renderChildren ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: '/login',\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n","import { createMuiTheme } from '@material-ui/core';\r\n\r\ndeclare module '@material-ui/core/styles/createMuiTheme' {\r\n  interface Theme {\r\n    sidebarWidth: number;\r\n    sidebarMobileHeight: number;\r\n  }\r\n\r\n  // allow configuration using `createMuiTheme`\r\n  interface ThemeOptions {\r\n    sidebarWidth?: number;\r\n    sidebarMobileHeight?: number;\r\n  }\r\n}\r\n\r\nexport default createMuiTheme({\r\n  palette: {\r\n    type: 'dark',\r\n    primary: {\r\n      main: '#F22F46',\r\n    },\r\n  },\r\n  sidebarWidth: 260,\r\n  sidebarMobileHeight: 90,\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\n\r\nimport App from './App';\r\nimport AppStateProvider, { useAppState } from './state';\r\nimport { BrowserRouter as Router, Redirect, Route, Switch } from 'react-router-dom';\r\nimport { ConnectOptions } from 'twilio-video';\r\nimport ErrorDialog from './components/ErrorDialog/ErrorDialog';\r\nimport LoginPage from './components/LoginPage/LoginPage';\r\nimport PrivateRoute from './components/PrivateRoute/PrivateRoute';\r\nimport theme from './theme';\r\nimport './types';\r\nimport { VideoProvider } from './components/VideoProvider';\r\n\r\n// See: https://media.twiliocdn.com/sdk/js/video/releases/2.0.0/docs/global.html#ConnectOptions\r\n// for available connection options.\r\nconst connectionOptions: ConnectOptions = {\r\n  bandwidthProfile: {\r\n    video: {\r\n      mode: 'collaboration',\r\n      dominantSpeakerPriority: 'standard',\r\n      renderDimensions: {\r\n        high: { height: 1080, width: 1920 },\r\n        standard: { height: 720, width: 1280 },\r\n        low: { height: 90, width: 160 },\r\n      },\r\n    },\r\n  },\r\n  dominantSpeaker: true,\r\n  maxAudioBitrate: 12000,\r\n  networkQuality: { local: 1, remote: 1 },\r\n  preferredVideoCodecs: [{ codec: 'VP8', simulcast: true }],\r\n};\r\n\r\nconst VideoApp = () => {\r\n  const { error, setError } = useAppState();\r\n\r\n  return (\r\n    <VideoProvider options={connectionOptions} onError={setError}>\r\n      <ErrorDialog dismissError={() => setError(null)} error={error} />\r\n      <App />\r\n    </VideoProvider>\r\n  );\r\n};\r\n\r\nReactDOM.render(\r\n  <MuiThemeProvider theme={theme}>\r\n    <CssBaseline />\r\n    <Router>\r\n      <AppStateProvider>\r\n        <Switch>\r\n          <PrivateRoute exact path=\"/\">\r\n            <VideoApp />\r\n          </PrivateRoute>\r\n          <PrivateRoute path=\"/room/:URLRoomName\">\r\n            <VideoApp />\r\n          </PrivateRoute>\r\n          <Route path=\"/login\">\r\n            <LoginPage />\r\n          </Route>\r\n          <Redirect to=\"/\" />\r\n        </Switch>\r\n      </AppStateProvider>\r\n    </Router>\r\n  </MuiThemeProvider>,\r\n  document.getElementById('root')\r\n);\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZIAAAEyCAYAAADQnlYUAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFdElEQVR42u3dwW3DUAxEQSnI2a2oCxXtLtyKGlB68BrZMH+mAoGH/8CLuF/HeW8AC3u8nrspvO/LCAAQEgAqruO8hQSAtyNiIwEgioiQABBFREgAiCIiJABEERESAKKICAkAUUSEBIAoIkICQBQRIQEgioiQABBFREgAiCIiJABEERESAKKICAkAW3rg8PuTH+PKGDDl8eNzc7SRAIiIkADQ2+iEBEBEhASATkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASA7t+QhQRARIQEQESEBICBERESABEREgARERIAhkZESABEREgARERIABgaESEBEBEhARARIQFgaESEBEBEhARARIQEgKERERKARSPyeD13IQEQkXpEhARARIQEQER6ERESABEREgAR6UVESABEREgARKQXESEBEBEhARCRXkSEBEBEhARARHoRERIAERESABHpRURIAERESABEREgARGRoRIQEQESEBEBEhARARIZGREgARERIAERESABEZGhEhARARIQEQESEBEBEhkZESABEREgARERIAERkaESEBEBEhARARIQEQESEBEBEVoyIkACIiJAATPLfIiIkACIiJAAiIiQAIiIkAKwYESEBEBEhARARIQEQESEBYMWICAmAiAgJgIgICYCICAmAiAgJACIiJAAiIiQAIiIkACIiJACIiJAAiIiQAIiIkACIiJAAiAhCAiAiQgIgIkICICJCAiAiCAmAiAgJgIgICYCICAmAiAgJgIggJAAiIiQAIiIkACIiJAAigpAAiIiQAIiIkACIiJAAiAhCAogIQgIgIkICICJCAiAiCAkgIggJgIj8Fd9GAAgINhIAhAQAIQFASABASAAQEgCEBAAhAQAhAUBIABASAIQEAIQEACEBQEgAEBIAEBIAhAQAIQFASAAQEgAQEgCEBAAhAUBIAEBIABASAIQEACEBACEBQEgAEBIAhAQAhAQAIQFASAAQEgCEBACEBAAhAUBIABASABASAIQEACEBQEgAQEgAEBIAhAQAIQEAIQFASAAQEoDQdZz3dZy3SQgJQBwUUxASADEREgAxERIAMUFIADEREyEBEBMhARATIQEQE4QEQEyEBEBMhARATIQEQEwQEgAxERIAMRESADEREgAxQUgAxERIAMRESADEREgAxERIABATIQEQEyEBEBMhARATIQFATIQEQEyEBEBMhARATIQEADEREgAxERIAMRESADEREgDEREgAxERIAMRESADEREgAWDsmQgIgJkICICZCAiAmQgLAijEREgAxERIAMRESADEREgBWjImQAGzb9ng9dzEREgAxERIAMRESADFZKiZCAiAmQgIgJkICICZDYyIkAGIiJABiIiQAYjI0JkICICZCAiAmQgIgJkNjIiQAYiIkAGIiJABiMjQmQgIgJkICICZCAiAmQ2MiJABiIiQAYtKLiZAAiImQAIhJLyZCAiAmQgIgJr2YCAmAmAgJgJj0YiIkAGIiJABi0ouJkACIiZAAiEkvJkICICZCAiAmvZgICcCiMRESADEREgDmx0RIAMRESADEREgAGBoTIQEQEyEBEBMhAWBoTIQEQEyEBEBMhASAoTEREgAxERIAMRESAIbGREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFZL+O8zZOwKP6926h/5a0AzYSABGNIiokAEQxERIAopgICQBRTIQEgCgmQgJAFBMhASCKiZAAEMVESACIYiIkAEQxERIAopgICQBRTIQEgCgmQgJAFBMhASCKiZAAEMVESACI/ACDMI238rqCJQAAAABJRU5ErkJggg==\""],"sourceRoot":""}